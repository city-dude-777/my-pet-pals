/* ========================================================
   MY PET PALS ‚Äî STYLES
   Kawaii chibi sticker style, pastel palette, chunky UI
   ======================================================== */

/* ---------- RESET & BASE ---------- */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --pink: #ffb6c1;
  --peach: #ffdab9;
  --lavender: #e6d5ff;
  --mint: #b5ead7;
  --sky: #bae1ff;
  --yellow: #fff5ba;
  --coral: #ff9a9e;
  --bg: #fef6fb;
  --text: #4a3548;
  --outline: #2d2030;
  --btn-shadow: #c9a0c9;
  --radius: 18px;
  --radius-lg: 28px;
  --font: 'Segoe UI', 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif;
}

html, body {
  width: 100%; height: 100%;
  overflow: hidden;
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  user-select: none;
  -webkit-user-select: none;
}

/* ---------- SCREENS ---------- */
.screen {
  position: fixed; inset: 0;
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1;
}
.screen.active { display: flex; }

/* ---------- SPLASH ---------- */
#splash-screen {
  background: linear-gradient(135deg, #fce4ec, #e8f5e9, #e3f2fd, #fff9c4);
  background-size: 400% 400%;
  animation: gradientShift 6s ease infinite;
}
@keyframes gradientShift {
  0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}
}
.splash-content { text-align: center; }
.splash-logo {
  max-width: min(380px, 85vw);
  border-radius: var(--radius-lg);
  box-shadow: 0 8px 30px rgba(0,0,0,.12);
  margin-bottom: 28px;
  animation: floatUp 2s ease infinite alternate;
}
@keyframes floatUp { 0%{transform:translateY(0)}100%{transform:translateY(-12px)} }

/* ---------- BUTTONS ---------- */
.btn {
  font-family: var(--font);
  font-weight: 700;
  border: 3px solid var(--outline);
  border-radius: var(--radius);
  cursor: pointer;
  transition: transform .12s, box-shadow .12s;
  outline: none;
  position: relative;
}
.btn:hover, .btn:focus-visible {
  transform: translateY(-3px) scale(1.04);
  box-shadow: 0 6px 18px rgba(0,0,0,.15);
}
.btn:active { transform: translateY(1px) scale(.97); }

.btn-big {
  font-size: 1.5rem;
  padding: 16px 48px;
  border-radius: var(--radius-lg);
}
.btn-rainbow {
  background: linear-gradient(135deg, var(--pink), var(--peach), var(--yellow), var(--mint), var(--sky), var(--lavender));
  background-size: 300% 300%;
  animation: gradientShift 4s ease infinite;
  color: var(--text);
}
.btn-green { background: var(--mint); color: var(--text); }

.btn-action {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  width: 58px; height: 64px;
  font-size: .68rem;
  padding: 4px;
  border-radius: 16px;
  background: #fff;
  box-shadow: 0 4px 0 var(--btn-shadow);
}
.btn-action .btn-icon { font-size: 1.2rem; line-height: 1; }
.btn-action .btn-label { font-size: .55rem; margin-top: 1px; }

.btn-feed { background: #ffe8d6; }
.btn-shower { background: #d6f0ff; }
.btn-play { background: #d6ffe8; }
.btn-groom { background: #f0d6ff; }
.btn-walk { background: #d6f5d6; }
.btn-sleep { background: #d6d6ff; }

.btn-small {
  font-size: .8rem;
  padding: 8px 16px;
  background: #fff;
  border-width: 2px;
}
.btn-close-overlay {
  margin-top: 14px;
  background: var(--coral);
  color: #fff;
  padding: 8px 20px;
  font-size: .9rem;
}

/* ---------- BOUNCE LOOP ---------- */
.bounce-loop { animation: bounceLoop 1.2s ease infinite; }
@keyframes bounceLoop {
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-8px)}
}

/* ---------- PET SELECTION ---------- */
#select-screen {
  background: linear-gradient(180deg, #fce4ec 0%, #e3f2fd 100%);
  padding: 20px;
  gap: 18px;
  overflow-y: auto;
}
.title-text {
  font-size: 1.8rem;
  text-shadow: 2px 2px 0 var(--pink);
}
.pet-cards {
  display: flex; gap: 16px; flex-wrap: wrap; justify-content: center;
}
.pet-card {
  background: #fff;
  border: 4px solid var(--outline);
  border-radius: var(--radius-lg);
  padding: 18px 22px 14px;
  text-align: center;
  cursor: pointer;
  width: 160px;
  transition: transform .2s, box-shadow .2s;
}
.pet-card:hover, .pet-card:focus-visible, .pet-card.selected {
  transform: scale(1.07);
  box-shadow: 0 8px 24px rgba(200,120,200,.3);
  border-color: var(--coral);
}
.pet-card h2 { font-size: 1.15rem; margin-top: 8px; }
.pet-card p { font-size: .75rem; color: #888; }

.card-pet-preview {
  width: 100px; height: 100px;
  margin: 0 auto;
  position: relative;
}

.name-input-area {
  display: flex; flex-direction: column; align-items: center; gap: 10px;
}
.name-input-area label { font-size: 1.1rem; font-weight: 700; }
#pet-name-input {
  font-family: var(--font);
  font-size: 1.2rem;
  padding: 10px 18px;
  border: 3px solid var(--outline);
  border-radius: var(--radius);
  text-align: center;
  width: 220px;
  outline: none;
}
#pet-name-input:focus { border-color: var(--coral); }

/* ---------- MINI PET PREVIEWS (selection cards) ---------- */
.mini-pet {
  width: 80px; height: 80px;
  position: absolute; left: 50%; top: 50%;
  transform: translate(-50%, -50%);
}

/* ===================== DOG MINI ===================== */
.dog-mini {
  width: 70px; height: 60px;
  background: #f5cfa0;
  border: 3px solid var(--outline);
  border-radius: 50% 50% 45% 45%;
  position: relative;
}
.dog-mini::before {
  content: '';
  position: absolute;
  width: 20px; height: 18px;
  background: #f5cfa0;
  border: 3px solid var(--outline);
  border-radius: 60% 60% 30% 30%;
  top: -12px; left: 6px;
}
.dog-mini::after {
  content: '';
  position: absolute;
  width: 20px; height: 18px;
  background: #f5cfa0;
  border: 3px solid var(--outline);
  border-radius: 60% 60% 30% 30%;
  top: -12px; right: 6px;
}

/* ===================== CAT MINI ===================== */
.cat-mini {
  width: 65px; height: 58px;
  background: #fff5ee;
  border: 3px solid var(--outline);
  border-radius: 50% 50% 42% 42%;
  position: relative;
}
.cat-mini::before {
  content: '';
  position: absolute;
  width: 0; height: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-bottom: 16px solid #fff5ee;
  top: -14px; left: 6px;
  filter: drop-shadow(0 -1px 0 var(--outline)) drop-shadow(-1px 0 0 var(--outline)) drop-shadow(1px 0 0 var(--outline));
}
.cat-mini::after {
  content: '';
  position: absolute;
  width: 0; height: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-bottom: 16px solid #fff5ee;
  top: -14px; right: 6px;
  filter: drop-shadow(0 -1px 0 var(--outline)) drop-shadow(-1px 0 0 var(--outline)) drop-shadow(1px 0 0 var(--outline));
}

/* ===================== BIRD MINI ===================== */
.bird-mini {
  width: 55px; height: 55px;
  background: #b5e8ff;
  border: 3px solid var(--outline);
  border-radius: 50%;
  position: relative;
}
.bird-mini::before {
  content: '';
  position: absolute;
  width: 0; height: 0;
  border-top: 6px solid transparent;
  border-bottom: 6px solid transparent;
  border-right: 12px solid #ffb347;
  left: -10px; top: 50%; transform: translateY(-50%);
  filter: drop-shadow(-1px 0 0 var(--outline));
}
.bird-mini::after {
  content: '';
  position: absolute;
  width: 18px; height: 10px;
  background: #8fd4f5;
  border: 2px solid var(--outline);
  border-radius: 50% 50% 20% 20%;
  right: -8px; top: 14px;
  transform: rotate(-15deg);
}

/* ---------- TOP BAR ---------- */
.top-bar {
  position: fixed; top: 0; left: 0; right: 0;
  background: rgba(255,255,255,.92);
  backdrop-filter: blur(8px);
  padding: 8px 14px 6px;
  z-index: 10;
  border-bottom: 3px solid var(--outline);
}
.pet-name-display {
  font-size: 1.1rem; font-weight: 800;
  text-align: center;
  margin-bottom: 2px;
}
.happiness-meter {
  display: flex; align-items: center; gap: 6px;
  margin-bottom: 4px;
}
.happiness-label { font-size: .75rem; font-weight: 700; }
.happiness-face { font-size: 1.4rem; }
.stat-bar-bg {
  flex: 1;
  height: 14px;
  background: #eee;
  border-radius: 10px;
  border: 2px solid var(--outline);
  overflow: hidden;
}
.stat-bar-fill {
  height: 100%;
  border-radius: 10px;
  transition: width .4s ease;
}
.happiness-bar-bg { height: 16px; }
.happiness-bar-fill { background: linear-gradient(90deg, #ff9a9e, #fad0c4, #fbc2eb, #a6c1ee); }
.stat-val { font-size: .7rem; font-weight: 700; min-width: 28px; text-align: right; }

.stats-row {
  display: flex; gap: 6px;
}
.stat-item {
  flex: 1;
  display: flex; align-items: center; gap: 3px;
}
.stat-emoji { font-size: .9rem; }
.hunger-fill { background: #ffb3b3; }
.clean-fill { background: #b3e0ff; }
.fun-fill { background: #b3ffcc; }
.groom-fill { background: #e0b3ff; }

/* ---------- PET STAGE ---------- */
.pet-stage {
  position: fixed;
  top: 115px; bottom: 160px; left: 0; right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  background: radial-gradient(ellipse at 50% 80%, #e8f8e8 0%, var(--bg) 70%);
}

/* ---------- SPEECH BUBBLE ---------- */
.speech-bubble {
  position: absolute;
  top: 8px; left: 50%;
  transform: translateX(-50%);
  background: #fff;
  border: 3px solid var(--outline);
  border-radius: 20px;
  padding: 8px 18px;
  font-size: .85rem;
  font-weight: 600;
  max-width: 260px;
  text-align: center;
  z-index: 5;
  opacity: 1;
  transition: opacity .3s;
}
.speech-bubble::after {
  content: '';
  position: absolute;
  bottom: -10px; left: 50%; transform: translateX(-50%);
  width: 0; height: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-top: 10px solid #fff;
  filter: drop-shadow(0 2px 0 var(--outline));
}
.speech-bubble.hidden { opacity: 0; pointer-events: none; }

/* ---------- PET CONTAINER ---------- */
.pet-container {
  position: relative;
  width: 200px; height: 240px;
}

/* ===================== CHIBI PET (common) ===================== */
.chibi-pet {
  position: absolute;
  bottom: 0; left: 50%;
  transform: translateX(-50%);
  animation: idleBounce 2s ease-in-out infinite;
}
@keyframes idleBounce {
  0%,100%{ transform: translateX(-50%) translateY(0); }
  50%{ transform: translateX(-50%) translateY(-6px); }
}

/* Body */
.chibi-body {
  width: 120px; height: 110px;
  border: 4px solid var(--outline);
  border-radius: 55% 55% 48% 48%;
  position: relative;
  z-index: 2;
}

/* Belly patch */
.chibi-belly {
  position: absolute;
  width: 70px; height: 50px;
  border-radius: 50%;
  bottom: 12px; left: 50%;
  transform: translateX(-50%);
  z-index: 3;
}

/* Eyes */
.chibi-eyes {
  position: absolute;
  top: 28px; left: 50%;
  transform: translateX(-50%);
  display: flex; gap: 24px;
  z-index: 4;
}
.chibi-eye {
  width: 22px; height: 24px;
  background: #222;
  border-radius: 50%;
  position: relative;
}
.chibi-eye::before {
  content: '';
  position: absolute;
  width: 8px; height: 8px;
  background: #fff;
  border-radius: 50%;
  top: 3px; left: 3px;
}
.chibi-eye::after {
  content: '';
  position: absolute;
  width: 4px; height: 4px;
  background: #fff;
  border-radius: 50%;
  top: 12px; right: 3px;
}
/* Blink */
.chibi-eye.blink {
  height: 4px;
  border-radius: 4px;
  top: 38px;
}
.chibi-eye.blink::before,
.chibi-eye.blink::after { display: none; }

/* Nose */
.chibi-nose {
  position: absolute;
  top: 52px; left: 50%;
  transform: translateX(-50%);
  z-index: 4;
}

/* Mouth */
.chibi-mouth {
  position: absolute;
  top: 60px; left: 50%;
  transform: translateX(-50%);
  z-index: 4;
  width: 16px; height: 8px;
  border-bottom: 3px solid var(--outline);
  border-radius: 0 0 50% 50%;
}

/* Blush cheeks */
.chibi-blush-l, .chibi-blush-r {
  position: absolute;
  width: 16px; height: 10px;
  background: rgba(255, 150, 150, .45);
  border-radius: 50%;
  top: 55px;
  z-index: 4;
}
.chibi-blush-l { left: 14px; }
.chibi-blush-r { right: 14px; }

/* Legs */
.chibi-legs {
  position: absolute;
  bottom: -14px; left: 50%;
  transform: translateX(-50%);
  display: flex; gap: 30px;
  z-index: 1;
}
.chibi-leg {
  width: 20px; height: 18px;
  background: inherit;
  border: 3px solid var(--outline);
  border-radius: 50% 50% 45% 45%;
}

/* ===================== DOG specifics ===================== */
.chibi-pet.dog .chibi-body { background: #f5cfa0; }
.chibi-pet.dog .chibi-belly { background: #fce8c8; }
.chibi-pet.dog .chibi-leg { background: #f5cfa0; }

/* Dog ears */
.dog-ear-l, .dog-ear-r {
  position: absolute;
  width: 30px; height: 28px;
  background: #e8b87a;
  border: 3px solid var(--outline);
  border-radius: 55% 55% 35% 35%;
  top: -16px;
  z-index: 1;
}
.dog-ear-l { left: 10px; transform: rotate(-10deg); }
.dog-ear-r { right: 10px; transform: rotate(10deg); }

/* Dog nose (triangle) */
.chibi-pet.dog .chibi-nose {
  width: 12px; height: 8px;
  background: #333;
  border-radius: 50%;
}

/* Dog tail */
.dog-tail {
  position: absolute;
  width: 14px; height: 30px;
  background: #e8b87a;
  border: 3px solid var(--outline);
  border-radius: 50%;
  right: -12px; bottom: 20px;
  transform: rotate(20deg);
  z-index: 0;
  animation: wagTail 0.6s ease-in-out infinite alternate;
}
@keyframes wagTail {
  0%{ transform: rotate(10deg); }
  100%{ transform: rotate(35deg); }
}

/* ===================== CAT specifics ===================== */
.chibi-pet.cat .chibi-body { background: #fff5ee; }
.chibi-pet.cat .chibi-belly { background: #fff; }
.chibi-pet.cat .chibi-leg { background: #fff5ee; }

/* Cat ears (triangles built with divs) */
.cat-ear-l, .cat-ear-r {
  position: absolute;
  width: 0; height: 0;
  border-left: 14px solid transparent;
  border-right: 14px solid transparent;
  border-bottom: 24px solid #fff5ee;
  top: -20px;
  z-index: 1;
  filter: drop-shadow(0 -1.5px 0 var(--outline)) drop-shadow(-1.5px 0 0 var(--outline)) drop-shadow(1.5px 0 0 var(--outline));
}
.cat-ear-l { left: 12px; }
.cat-ear-r { right: 12px; }

/* Cat inner ear */
.cat-ear-inner-l, .cat-ear-inner-r {
  position: absolute;
  width: 0; height: 0;
  border-left: 7px solid transparent;
  border-right: 7px solid transparent;
  border-bottom: 12px solid var(--pink);
  top: -11px;
  z-index: 2;
}
.cat-ear-inner-l { left: 19px; }
.cat-ear-inner-r { right: 19px; }

/* Cat nose */
.chibi-pet.cat .chibi-nose {
  width: 0; height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 6px solid #ffb6c1;
}

/* Whiskers */
.cat-whiskers {
  position: absolute;
  top: 56px; left: 0; right: 0;
  z-index: 4;
}
.cat-whisker {
  position: absolute;
  width: 24px; height: 2px;
  background: var(--outline);
}
.cat-whisker:nth-child(1){ left: -8px; top: 0; transform: rotate(-8deg); }
.cat-whisker:nth-child(2){ left: -8px; top: 7px; transform: rotate(5deg); }
.cat-whisker:nth-child(3){ right: -8px; top: 0; transform: rotate(8deg); }
.cat-whisker:nth-child(4){ right: -8px; top: 7px; transform: rotate(-5deg); }

/* Cat tail */
.cat-tail {
  position: absolute;
  width: 12px; height: 45px;
  background: #fff5ee;
  border: 3px solid var(--outline);
  border-radius: 50% 50% 0 0;
  left: -14px; bottom: 10px;
  transform: rotate(-15deg);
  z-index: 0;
  transform-origin: bottom center;
  animation: catTailSway 3s ease-in-out infinite alternate;
}
@keyframes catTailSway {
  0%{ transform: rotate(-15deg); }
  100%{ transform: rotate(5deg); }
}

/* ===================== BIRD specifics ===================== */
.chibi-pet.bird .chibi-body {
  background: #b5e8ff;
  border-radius: 50%;
  width: 100px; height: 100px;
}
.chibi-pet.bird .chibi-belly {
  background: #d9f2ff;
  width: 60px; height: 40px;
  bottom: 10px;
}
.chibi-pet.bird .chibi-leg { background: #ffcc80; width: 12px; height: 12px; }
.chibi-pet.bird .chibi-legs { gap: 20px; }
.chibi-pet.bird .chibi-eyes { top: 22px; gap: 20px; }
.chibi-pet.bird .chibi-eye { width: 18px; height: 20px; }
.chibi-pet.bird .chibi-blush-l { top: 45px; left: 10px; }
.chibi-pet.bird .chibi-blush-r { top: 45px; right: 10px; }
.chibi-pet.bird .chibi-mouth { display: none; }

/* Bird beak */
.bird-beak {
  position: absolute;
  width: 0; height: 0;
  border-top: 8px solid transparent;
  border-bottom: 8px solid transparent;
  border-right: 14px solid #ffb347;
  left: -12px; top: 38px;
  z-index: 5;
  filter: drop-shadow(-1px 0 0 var(--outline));
}

/* Bird nose override */
.chibi-pet.bird .chibi-nose { display: none; }

/* Bird wings */
.bird-wing-l, .bird-wing-r {
  position: absolute;
  width: 28px; height: 18px;
  background: #8fd4f5;
  border: 3px solid var(--outline);
  border-radius: 50%;
  top: 40px;
  z-index: 1;
  animation: flapWings 1.5s ease-in-out infinite alternate;
}
.bird-wing-l { left: -16px; transform: rotate(10deg); }
.bird-wing-r { right: -16px; transform: rotate(-10deg); }
@keyframes flapWings {
  0%{ transform: rotate(10deg) translateY(0); }
  100%{ transform: rotate(-5deg) translateY(-4px); }
}

/* ===================== REACTIONS ===================== */
/* Happy bounce */
.pet-happy { animation: happyBounce .4s ease 3; }
@keyframes happyBounce {
  0%,100%{ transform: translateX(-50%) translateY(0) scale(1); }
  50%{ transform: translateX(-50%) translateY(-18px) scale(1.06); }
}

/* Dirty */
.stink-line {
  position: absolute;
  font-size: 1.2rem;
  animation: stinkFloat 1.5s ease forwards;
  z-index: 10;
}
@keyframes stinkFloat {
  0%{ opacity: 1; transform: translateY(0); }
  100%{ opacity: 0; transform: translateY(-30px); }
}

/* Hungry eyes */
.chibi-eye.pleading::before { width: 12px; height: 12px; top: 1px; left: 1px; }

/* Bored sway */
.pet-bored { animation: boredSway 3s ease-in-out infinite; }
@keyframes boredSway {
  0%,100%{ transform: translateX(-50%) rotate(0); }
  25%{ transform: translateX(-50%) rotate(-3deg); }
  75%{ transform: translateX(-50%) rotate(3deg); }
}

/* ===================== SPARKLE PARTICLES ===================== */
.particles-container {
  position: absolute; inset: 0;
  pointer-events: none;
  z-index: 20;
}
.sparkle-particle {
  position: absolute;
  font-size: 1.2rem;
  animation: sparkleRise 1s ease forwards;
  pointer-events: none;
}
@keyframes sparkleRise {
  0%{ opacity: 1; transform: translateY(0) scale(1); }
  100%{ opacity: 0; transform: translateY(-50px) scale(.5); }
}
.float-emoji {
  position: absolute;
  font-size: 1.5rem;
  animation: floatEmoji 1.2s ease forwards;
  pointer-events: none;
}
@keyframes floatEmoji {
  0%{ opacity: 1; transform: translate(0,0) scale(1); }
  100%{ opacity: 0; transform: translate(var(--dx), -60px) scale(.4); }
}

/* ===================== EVENT BANNER ===================== */
.event-banner {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: linear-gradient(135deg, var(--yellow), var(--peach));
  border: 4px solid var(--outline);
  border-radius: var(--radius-lg);
  padding: 16px 32px;
  font-size: 1.1rem;
  font-weight: 700;
  z-index: 30;
  text-align: center;
  animation: popIn .4s ease;
  box-shadow: 0 8px 30px rgba(0,0,0,.15);
}
@keyframes popIn {
  0%{ transform: translate(-50%, -50%) scale(0); }
  70%{ transform: translate(-50%, -50%) scale(1.1); }
  100%{ transform: translate(-50%, -50%) scale(1); }
}
.event-banner.hidden { display: none; }

/* ===================== ACTION BUTTONS BAR ===================== */
.action-buttons {
  position: fixed;
  bottom: 52px; left: 0; right: 0;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 6px;
  padding: 8px 4px;
  z-index: 10;
}

.bottom-bar {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 16px;
  background: rgba(255,255,255,.92);
  backdrop-filter: blur(8px);
  border-top: 3px solid var(--outline);
  z-index: 10;
}
.hearts-display {
  font-size: 1rem; font-weight: 700;
}

/* ===================== OVERLAYS ===================== */
.overlay {
  position: fixed; inset: 0;
  background: rgba(0,0,0,.45);
  display: flex; align-items: center; justify-content: center;
  z-index: 50;
}
.overlay.hidden { display: none; }
.overlay-panel {
  background: #fff;
  border: 4px solid var(--outline);
  border-radius: var(--radius-lg);
  padding: 24px 28px;
  max-width: 400px;
  width: 90%;
  text-align: center;
  animation: popIn .3s ease;
}

/* Feed panel */
.snack-options { display: flex; gap: 10px; justify-content: center; margin-top: 14px; flex-wrap: wrap; }
.btn-snack {
  font-size: 1rem;
  padding: 12px 18px;
  background: var(--peach);
  border: 3px solid var(--outline);
  border-radius: var(--radius);
  cursor: pointer;
  font-family: var(--font);
  font-weight: 700;
  transition: transform .12s;
}
.btn-snack:hover { transform: scale(1.08); }

/* (Shower overlay removed ‚Äì now using full bathroom scene) */

/* Play panel */
.play-area {
  width: 100%; height: 220px;
  background: #e8f5e9;
  border-radius: var(--radius);
  border: 3px solid var(--outline);
  position: relative;
  overflow: hidden;
  margin-top: 10px;
  cursor: pointer;
}
.play-target {
  position: absolute;
  font-size: 2rem;
  cursor: pointer;
  transition: none;
  animation: targetPop .2s ease;
  user-select: none;
}
@keyframes targetPop {
  0%{ transform: scale(0); }
  100%{ transform: scale(1); }
}

/* Arrow prompts for bird rhythm game */
.arrow-prompt {
  position: absolute;
  font-size: 2.5rem;
  cursor: pointer;
  animation: targetPop .2s ease;
  user-select: none;
}

/* Groom panel */
.brush-meter-bg {
  width: 100%; height: 30px;
  background: #eee;
  border-radius: 15px;
  border: 3px solid var(--outline);
  overflow: hidden;
  margin: 14px 0;
}
.brush-meter-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--lavender), var(--pink));
  border-radius: 15px;
  transition: width .15s;
}
/* brush-target removed ‚Äî now using draggable barber brush */
.groom-result {
  font-size: 1.1rem; font-weight: 700;
  color: var(--coral);
  min-height: 1.5em;
}

/* ===================== STICKER PANEL ===================== */
.sticker-panel { max-height: 80vh; overflow-y: auto; }
.sticker-grid {
  display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;
  margin: 12px 0;
}
.sticker-slot {
  width: 50px; height: 50px;
  background: #f5f5f5;
  border: 2px dashed #ccc;
  border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.5rem;
}
.sticker-slot.earned {
  background: var(--yellow);
  border: 2px solid var(--outline);
  animation: stickerShine 2s ease infinite;
}
@keyframes stickerShine {
  0%,100%{ box-shadow: 0 0 0 transparent; }
  50%{ box-shadow: 0 0 12px rgba(255,215,0,.5); }
}

.accessory-grid {
  display: flex; flex-wrap: wrap; gap: 8px; justify-content: center;
  margin: 10px 0;
}
.accessory-btn {
  padding: 8px 14px;
  border: 2px solid var(--outline);
  border-radius: var(--radius);
  background: #f9f9f9;
  cursor: pointer;
  font-size: .85rem;
  font-family: var(--font);
  font-weight: 600;
  transition: transform .12s;
}
.accessory-btn:hover { transform: scale(1.06); }
.accessory-btn.locked { opacity: .4; cursor: default; }
.accessory-btn.equipped { background: var(--mint); border-color: var(--coral); }

/* ===================== ACCESSORIES ON PET ===================== */
.accessory-overlay {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  pointer-events: none;
  z-index: 15;
}

/* Chef hat */
.acc-chef-hat {
  position: absolute;
  top: -20px; left: 50%; transform: translateX(-50%);
  width: 40px; height: 24px;
  background: #fff;
  border: 3px solid var(--outline);
  border-radius: 50% 50% 5px 5px;
}
.acc-chef-hat::before {
  content: '';
  position: absolute;
  bottom: -6px; left: -4px;
  width: 48px; height: 10px;
  background: #fff;
  border: 3px solid var(--outline);
  border-radius: 3px;
}

/* Bow tie */
.acc-bow-tie {
  position: absolute;
  bottom: 32px; left: 50%; transform: translateX(-50%);
}
.acc-bow-tie::before, .acc-bow-tie::after {
  content: '';
  position: absolute;
  width: 16px; height: 12px;
  background: var(--coral);
  border: 2px solid var(--outline);
  border-radius: 50%;
}
.acc-bow-tie::before { left: -18px; top: -6px; }
.acc-bow-tie::after { left: 2px; top: -6px; }

/* Collar tag */
.acc-collar {
  position: absolute;
  bottom: 24px; left: 50%; transform: translateX(-50%);
  width: 60px; height: 8px;
  background: var(--coral);
  border: 2px solid var(--outline);
  border-radius: 4px;
}
.acc-collar::after {
  content: '‚≠ê';
  position: absolute;
  font-size: .7rem;
  bottom: -12px; left: 50%; transform: translateX(-50%);
}

/* Flower crown */
.acc-flower-crown {
  position: absolute;
  top: -14px; left: 50%; transform: translateX(-50%);
  display: flex; gap: 4px;
}
.acc-flower-crown::before {
  content: 'üå∏üåºüå∏';
  font-size: .8rem;
}

/* Star headband */
.acc-star-headband {
  position: absolute;
  top: -12px; left: 50%; transform: translateX(-50%);
  width: 50px; height: 6px;
  background: var(--yellow);
  border: 2px solid var(--outline);
  border-radius: 3px;
}
.acc-star-headband::after {
  content: '‚≠ê';
  position: absolute;
  font-size: .9rem;
  top: -14px; left: 50%; transform: translateX(-50%);
}

/* ===================== CONFETTI ===================== */
.confetti-container {
  position: fixed; inset: 0;
  pointer-events: none;
  z-index: 100;
  overflow: hidden;
}
.confetti-piece {
  position: absolute;
  width: 10px; height: 10px;
  top: -10px;
  animation: confettiFall 2s ease forwards;
}
@keyframes confettiFall {
  0%{ transform: translateY(0) rotate(0deg); opacity: 1; }
  100%{ transform: translateY(100vh) rotate(720deg); opacity: 0; }
}

/* (Soapy overlay removed ‚Äì now using full bathroom scene) */

/* ============================================================
   DINING ROOM SCENE (Feed)
   ============================================================ */
#feed-scene {
  z-index: 2;
}

.dining-room {
  position: absolute;
  inset: 0;
  bottom: 170px;
  overflow: hidden;
}

/* ‚îÄ‚îÄ Wall ‚îÄ‚îÄ */
.dining-wall {
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 55%;
  background: linear-gradient(180deg, #fce4c8 0%, #f5dbb8 60%, #e8cfa8 100%);
  /* wallpaper pattern via repeating gradient */
  background-image:
    linear-gradient(180deg, #fce4c8 0%, #f5dbb8 60%, #e8cfa8 100%),
    repeating-linear-gradient(90deg, transparent, transparent 40px, rgba(200,170,130,.12) 40px, rgba(200,170,130,.12) 42px);
  background-blend-mode: normal;
}

.wall-picture {
  position: absolute;
  top: 12%; left: 50%; transform: translateX(-50%);
  font-size: 2.5rem;
  background: #fff;
  border: 4px solid #8b6e4e;
  border-radius: 6px;
  padding: 4px 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,.15);
}

.wall-lamp {
  position: absolute;
  top: 8%;
  width: 16px; height: 24px;
  background: linear-gradient(180deg, #ffe082, #ffcc33);
  border: 2px solid #b8860b;
  border-radius: 4px 4px 50% 50%;
  box-shadow: 0 0 20px rgba(255,200,50,.5);
}
.wall-lamp::after {
  content: '';
  position: absolute;
  top: -8px; left: 50%; transform: translateX(-50%);
  width: 6px; height: 10px;
  background: #8b6e4e;
  border-radius: 2px;
}
.wall-lamp-l { left: 18%; }
.wall-lamp-r { right: 18%; }

/* ‚îÄ‚îÄ Floor ‚îÄ‚îÄ */
.dining-floor {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 45%;
  background:
    repeating-conic-gradient(#d4a76a 0% 25%, #c49660 0% 50%) 0 0 / 40px 40px;
  /* wood-plank look */
  background: linear-gradient(90deg,
    #c49660 0%, #d4a76a 10%, #c49660 20%, #d4a76a 30%,
    #c49660 40%, #d4a76a 50%, #c49660 60%, #d4a76a 70%,
    #c49660 80%, #d4a76a 90%, #c49660 100%);
}

/* ‚îÄ‚îÄ Table ‚îÄ‚îÄ */
.dining-table {
  position: absolute;
  bottom: 22%; left: 50%; transform: translateX(-50%);
  width: 300px; height: 70px;
  z-index: 3;
}

/* Red tablecloth */
.tablecloth {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 70px;
  background: linear-gradient(180deg, #d32f2f 0%, #b71c1c 100%);
  border: 3px solid var(--outline);
  border-radius: 8px 8px 4px 4px;
  box-shadow: 0 6px 16px rgba(0,0,0,.2);
}

/* Tablecloth scallop / fringe at the bottom */
.tablecloth-fringe {
  position: absolute;
  bottom: -14px; left: 8px; right: 8px;
  height: 16px;
  background:
    radial-gradient(circle at 10px 0, transparent 10px, #c62828 10px, #c62828 12px, transparent 12px);
  background-size: 20px 16px;
  background-position: 0 0;
}

/* White checkered pattern on tablecloth */
.tablecloth::before {
  content: '';
  position: absolute;
  inset: 4px;
  background:
    repeating-linear-gradient(
      90deg,
      transparent, transparent 14px,
      rgba(255,255,255,.12) 14px, rgba(255,255,255,.12) 28px
    ),
    repeating-linear-gradient(
      0deg,
      transparent, transparent 14px,
      rgba(255,255,255,.12) 14px, rgba(255,255,255,.12) 28px
    );
  border-radius: 4px;
}

/* Table legs */
.tablecloth::after {
  content: '';
  position: absolute;
  bottom: -36px; left: 30px;
  width: 14px; height: 36px;
  background: #6d4c41;
  border: 2px solid var(--outline);
  border-radius: 0 0 4px 4px;
  box-shadow:
    218px 0 0 0 #6d4c41,
    218px 0 0 2px var(--outline);
}

/* Plate */
.plate {
  position: absolute;
  top: -22px; left: 50%; transform: translateX(-50%);
  width: 70px; height: 30px;
  background: #fff;
  border: 3px solid #ccc;
  border-radius: 50%;
  z-index: 4;
  box-shadow: 0 2px 6px rgba(0,0,0,.1);
}
.plate-inner {
  position: absolute;
  top: 5px; left: 50%; transform: translateX(-50%);
  width: 46px; height: 18px;
  border: 2px solid #e0e0e0;
  border-radius: 50%;
}
.plate-food {
  position: absolute;
  top: 2px; left: 50%; transform: translateX(-50%);
  font-size: 1.2rem;
  z-index: 5;
}

/* Glass */
.glass {
  position: absolute;
  top: -28px; right: 40px;
  width: 18px; height: 28px;
  background: rgba(200,230,255,.5);
  border: 2px solid rgba(150,190,220,.6);
  border-radius: 2px 2px 6px 6px;
  z-index: 4;
}
.glass-liquid {
  position: absolute;
  bottom: 2px; left: 2px; right: 2px;
  height: 60%;
  background: #ffcc80;
  border-radius: 0 0 4px 4px;
}

/* Napkin */
.napkin {
  position: absolute;
  top: -14px; left: 30px;
  width: 22px; height: 18px;
  background: #ffcdd2;
  border: 2px solid var(--outline);
  border-radius: 2px;
  z-index: 4;
  transform: rotate(-5deg);
}

/* ‚îÄ‚îÄ Pet at table ‚îÄ‚îÄ */
.dining-pet-spot {
  position: absolute;
  bottom: 30%; left: 50%; transform: translateX(-50%);
  z-index: 5;
}
.dining-pet-spot .pet-container {
  width: 140px; height: 170px;
}

/* ‚îÄ‚îÄ Speech bubble ‚îÄ‚îÄ */
.dining-speech-bubble {
  position: absolute;
  top: 6%; left: 50%; transform: translateX(-50%);
  background: #fff;
  border: 3px solid var(--outline);
  border-radius: 20px;
  padding: 8px 18px;
  font-size: .9rem;
  font-weight: 600;
  max-width: 240px;
  text-align: center;
  z-index: 10;
  opacity: 1;
  transition: opacity .3s;
}
.dining-speech-bubble::after {
  content: '';
  position: absolute;
  bottom: -10px; left: 50%; transform: translateX(-50%);
  width: 0; height: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-top: 10px solid #fff;
  filter: drop-shadow(0 2px 0 var(--outline));
}
.dining-speech-bubble.hidden { opacity: 0; pointer-events: none; }

/* ‚îÄ‚îÄ Bottom bar (snack picker) ‚îÄ‚îÄ */
.dining-bottom-bar {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: linear-gradient(180deg, rgba(255,255,255,.95), #fff);
  border-top: 4px solid var(--outline);
  padding: 12px 16px 18px;
  text-align: center;
  z-index: 10;
}
.dining-title {
  font-size: 1.2rem;
  margin-bottom: 8px;
  color: var(--text);
}
.dining-bottom-bar .snack-options {
  margin-bottom: 10px;
}


/* ============================================================
   PARK SCENE (Play)
   ============================================================ */
#park-scene {
  z-index: 2;
}

.park {
  position: absolute;
  inset: 0;
  bottom: 260px;
  overflow: hidden;
}

/* ‚îÄ‚îÄ Sky ‚îÄ‚îÄ */
.park-sky {
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 55%;
  background: linear-gradient(180deg, #87ceeb 0%, #b3e5fc 50%, #e1f5fe 100%);
}

/* Sun */
.sun {
  position: absolute;
  top: 8%; right: 12%;
  width: 50px; height: 50px;
  background: radial-gradient(circle, #fff176 30%, #ffee58 60%, transparent 70%);
  border-radius: 50%;
  box-shadow: 0 0 40px rgba(255,235,59,.6), 0 0 80px rgba(255,235,59,.3);
  animation: sunPulse 4s ease-in-out infinite alternate;
}
@keyframes sunPulse {
  0%{ box-shadow: 0 0 40px rgba(255,235,59,.6), 0 0 80px rgba(255,235,59,.3); }
  100%{ box-shadow: 0 0 50px rgba(255,235,59,.8), 0 0 100px rgba(255,235,59,.4); }
}

/* Clouds */
.cloud {
  position: absolute;
  background: #fff;
  border-radius: 50px;
  opacity: .9;
}
.cloud::before, .cloud::after {
  content: '';
  position: absolute;
  background: #fff;
  border-radius: 50%;
}
.cloud-1 {
  width: 80px; height: 28px;
  top: 14%; left: 10%;
  animation: cloudDrift 30s linear infinite;
}
.cloud-1::before { width: 36px; height: 36px; top: -18px; left: 14px; }
.cloud-1::after { width: 28px; height: 28px; top: -10px; right: 10px; }

.cloud-2 {
  width: 100px; height: 32px;
  top: 22%; left: 55%;
  animation: cloudDrift 40s linear infinite;
  animation-delay: -15s;
}
.cloud-2::before { width: 44px; height: 44px; top: -22px; left: 18px; }
.cloud-2::after { width: 32px; height: 32px; top: -14px; right: 14px; }

.cloud-3 {
  width: 60px; height: 22px;
  top: 8%; left: 35%;
  animation: cloudDrift 35s linear infinite;
  animation-delay: -8s;
}
.cloud-3::before { width: 28px; height: 28px; top: -14px; left: 10px; }
.cloud-3::after { width: 20px; height: 20px; top: -8px; right: 8px; }

@keyframes cloudDrift {
  0%{ transform: translateX(0); }
  100%{ transform: translateX(120vw); }
}

/* ‚îÄ‚îÄ Trees ‚îÄ‚îÄ */
.park-trees {
  position: absolute;
  bottom: 42%; left: 0; right: 0;
  height: 40%;
  z-index: 1;
}
.tree { position: absolute; bottom: 0; }
.tree-top {
  width: 60px; height: 60px;
  background: radial-gradient(circle, #66bb6a 40%, #43a047 100%);
  border: 3px solid var(--outline);
  border-radius: 50%;
  position: relative;
  z-index: 2;
}
.tree-top::before {
  content: '';
  position: absolute;
  width: 40px; height: 40px;
  background: radial-gradient(circle, #81c784 40%, #66bb6a 100%);
  border: 3px solid var(--outline);
  border-radius: 50%;
  top: -18px; left: 10px;
}
.tree-trunk {
  width: 14px; height: 40px;
  background: linear-gradient(90deg, #6d4c41, #8d6e63);
  border: 2px solid var(--outline);
  border-radius: 0 0 4px 4px;
  margin: -8px auto 0;
  position: relative;
  z-index: 1;
}
.tree-1 { left: 5%; }
.tree-2 { left: 75%; }
.tree-2 .tree-top { width: 50px; height: 50px; }
.tree-2 .tree-top::before { width: 34px; height: 34px; }
.tree-2 .tree-trunk { height: 34px; }
.tree-3 { left: 42%; }
.tree-3 .tree-top { width: 70px; height: 70px; background: radial-gradient(circle, #4caf50 40%, #388e3c 100%); }
.tree-3 .tree-top::before { width: 48px; height: 48px; top: -22px; left: 12px; background: radial-gradient(circle, #66bb6a 40%, #4caf50 100%); }
.tree-3 .tree-trunk { height: 48px; width: 16px; }

/* ‚îÄ‚îÄ Ground ‚îÄ‚îÄ */
.park-ground {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 45%;
  background: linear-gradient(180deg, #66bb6a 0%, #4caf50 30%, #43a047 100%);
  z-index: 2;
}

/* Grass blades */
.grass-blade {
  position: absolute;
  top: -8px;
  width: 6px; height: 16px;
  background: #2e7d32;
  border-radius: 50% 50% 0 0;
  transform-origin: bottom center;
  animation: grassSway 3s ease-in-out infinite alternate;
}
.gb-1 { left: 8%; animation-delay: 0s; }
.gb-2 { left: 25%; animation-delay: .4s; height: 12px; }
.gb-3 { left: 48%; animation-delay: .8s; }
.gb-4 { left: 70%; animation-delay: .2s; height: 14px; }
.gb-5 { left: 88%; animation-delay: .6s; }
@keyframes grassSway {
  0%{ transform: rotate(-5deg); }
  100%{ transform: rotate(5deg); }
}

/* Flowers */
.park-flower {
  position: absolute;
  font-size: 1.2rem;
  top: 6px;
  animation: flowerBob 3s ease-in-out infinite alternate;
}
.pf-1 { left: 15%; animation-delay: 0s; }
.pf-2 { left: 60%; animation-delay: .5s; }
.pf-3 { left: 85%; animation-delay: 1s; font-size: 1rem; }
@keyframes flowerBob {
  0%{ transform: translateY(0) rotate(-3deg); }
  100%{ transform: translateY(-4px) rotate(3deg); }
}

/* Park bench */
.park-bench {
  position: absolute;
  top: 18px; left: 22%;
  width: 50px; height: 20px;
  background: #8d6e63;
  border: 2px solid var(--outline);
  border-radius: 4px;
}
.park-bench::before {
  content: '';
  position: absolute;
  bottom: -12px; left: 6px;
  width: 8px; height: 12px;
  background: #6d4c41;
  border: 2px solid var(--outline);
  border-radius: 0 0 2px 2px;
  box-shadow: 28px 0 0 0 #6d4c41;
}
.park-bench::after {
  content: '';
  position: absolute;
  top: -10px; left: 0; right: 0;
  height: 10px;
  background: #a1887f;
  border: 2px solid var(--outline);
  border-radius: 4px 4px 0 0;
}

/* ‚îÄ‚îÄ Fence ‚îÄ‚îÄ */
.park-fence {
  position: absolute;
  bottom: 43%; left: 0; right: 0;
  height: 30px;
  z-index: 3;
}
.fence-post {
  position: absolute;
  bottom: 0;
  width: 8px; height: 30px;
  background: #fff;
  border: 2px solid #bbb;
  border-radius: 2px 2px 0 0;
}
.fence-post:nth-child(1) { left: 4%; }
.fence-post:nth-child(2) { left: 18%; }
.fence-post:nth-child(3) { left: 32%; }
.fence-post:nth-child(4) { left: 50%; }
.fence-post:nth-child(5) { left: 64%; }
.fence-post:nth-child(6) { left: 78%; }
.fence-post:nth-child(7) { left: 92%; }

.fence-rail {
  position: absolute;
  left: 3%; right: 3%;
  height: 4px;
  background: #fff;
  border: 1px solid #bbb;
  border-radius: 2px;
}
.fence-rail-top { top: 4px; }
.fence-rail-bottom { top: 16px; }

/* ‚îÄ‚îÄ Pet at park ‚îÄ‚îÄ */
.park-pet-spot {
  position: absolute;
  bottom: 28%; left: 50%; transform: translateX(-50%);
  z-index: 5;
}
.park-pet-spot .pet-container {
  width: 150px; height: 180px;
}

/* ‚îÄ‚îÄ Speech bubble ‚îÄ‚îÄ */
.park-speech-bubble {
  position: absolute;
  top: 5%; left: 50%; transform: translateX(-50%);
  background: #fff;
  border: 3px solid var(--outline);
  border-radius: 20px;
  padding: 8px 18px;
  font-size: .9rem;
  font-weight: 600;
  max-width: 240px;
  text-align: center;
  z-index: 10;
  opacity: 1;
  transition: opacity .3s;
}
.park-speech-bubble::after {
  content: '';
  position: absolute;
  bottom: -10px; left: 50%; transform: translateX(-50%);
  width: 0; height: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-top: 10px solid #fff;
  filter: drop-shadow(0 2px 0 var(--outline));
}
.park-speech-bubble.hidden { opacity: 0; pointer-events: none; }

/* ‚îÄ‚îÄ Bottom bar (play area) ‚îÄ‚îÄ */
.park-bottom-bar {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: linear-gradient(180deg, rgba(255,255,255,.95), #fff);
  border-top: 4px solid var(--outline);
  padding: 8px 16px 14px;
  text-align: center;
  z-index: 10;
}
.park-title {
  font-size: 1.1rem;
  margin-bottom: 4px;
  color: var(--text);
}
.park-bottom-bar .play-area {
  height: 160px;
  margin-top: 6px;
}


/* ============================================================
   BATHROOM SCENE (Shower)
   ============================================================ */
#bath-scene {
  z-index: 2;
}

.bathroom {
  position: absolute;
  inset: 0;
  bottom: 165px;
  overflow: hidden;
}

/* ‚îÄ‚îÄ Tiled wall ‚îÄ‚îÄ */
.bath-wall {
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 55%;
  background:
    repeating-linear-gradient(
      90deg,
      #e3f2fd 0px, #e3f2fd 38px,
      #bbdefb 38px, #bbdefb 40px
    ),
    repeating-linear-gradient(
      0deg,
      #e3f2fd 0px, #e3f2fd 38px,
      #bbdefb 38px, #bbdefb 40px
    );
  background-blend-mode: darken;
}

/* ‚îÄ‚îÄ Floor ‚îÄ‚îÄ */
.bath-floor {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 45%;
  background:
    repeating-conic-gradient(
      #e0e0e0 0deg 90deg,
      #fafafa 90deg 180deg
    ) 0 0 / 28px 28px;
}

/* ‚îÄ‚îÄ Towel rack ‚îÄ‚îÄ */
.towel-rack {
  position: absolute;
  top: 12%; right: 8%;
  width: 50px; height: 6px;
  background: #9e9e9e;
  border: 2px solid var(--outline);
  border-radius: 3px;
  z-index: 2;
}
.towel-hanging {
  position: absolute;
  top: 5px; left: 5px;
  width: 40px; height: 28px;
  background: linear-gradient(180deg, #fff9c4, #fff176);
  border: 2px solid var(--outline);
  border-radius: 0 0 6px 6px;
}

/* ‚îÄ‚îÄ Rubber duck ‚îÄ‚îÄ */
.rubber-duck {
  position: absolute;
  bottom: 46%; left: 14%;
  font-size: 1.8rem;
  z-index: 3;
  animation: duckBob 2s ease-in-out infinite alternate;
}
@keyframes duckBob {
  0% { transform: translateY(0) rotate(-5deg); }
  100% { transform: translateY(-6px) rotate(5deg); }
}

/* ‚îÄ‚îÄ Bath shelf ‚îÄ‚îÄ */
.bath-shelf {
  position: absolute;
  top: 18%; left: 6%;
  width: 44px; height: 8px;
  background: #fff;
  border: 2px solid #bbb;
  border-radius: 3px;
  z-index: 2;
}
.shampoo-bottle {
  position: absolute;
  bottom: 6px; left: 4px;
  width: 12px; height: 20px;
  background: #a5d6a7;
  border: 2px solid var(--outline);
  border-radius: 4px 4px 6px 6px;
}
.shampoo-bottle::before {
  content: '';
  position: absolute;
  top: -6px; left: 50%; transform: translateX(-50%);
  width: 6px; height: 6px;
  background: #81c784;
  border: 1px solid var(--outline);
  border-radius: 2px;
}
.shampoo-bottle.sb-pink {
  left: 22px;
  background: #f48fb1;
}
.shampoo-bottle.sb-pink::before {
  background: #ec407a;
}

/* ‚îÄ‚îÄ Bathtub ‚îÄ‚îÄ */
.bathtub {
  position: absolute;
  bottom: 18%; left: 50%; transform: translateX(-50%);
  width: 240px; height: 100px;
  z-index: 3;
}
.bathtub-inner {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 80px;
  background: #fff;
  border: 4px solid var(--outline);
  border-radius: 0 0 40% 40%;
  z-index: 1;
}
.bathtub-rim {
  position: absolute;
  top: 0; left: -6px; right: -6px;
  height: 20px;
  background: #f5f5f5;
  border: 4px solid var(--outline);
  border-radius: 10px;
  z-index: 3;
}

/* Water level in tub */
.tub-water {
  position: absolute;
  bottom: 4px; left: 4px; right: 4px;
  height: 0%;
  max-height: 60px;
  background: linear-gradient(180deg, rgba(100,181,246,.6), rgba(66,165,245,.8));
  border-radius: 0 0 38% 38%;
  z-index: 2;
  transition: height .4s ease;
}

/* Bubbles in tub */
.tub-bubbles {
  position: absolute;
  bottom: 20px; left: 0; right: 0;
  height: 60px;
  z-index: 4;
  pointer-events: none;
}
.tub-bub {
  position: absolute;
  width: 18px; height: 18px;
  background: radial-gradient(circle at 30% 30%, #fff, rgba(180,220,255,.5));
  border: 1px solid rgba(150,200,240,.4);
  border-radius: 50%;
  animation: tubBubFloat 2s ease-in-out infinite alternate;
}
@keyframes tubBubFloat {
  0% { transform: translateY(0); }
  100% { transform: translateY(-8px); }
}

/* Pet in tub */
.bath-pet-spot {
  position: absolute;
  bottom: 20px; left: 50%; transform: translateX(-50%);
  z-index: 5;
}
.bath-pet-spot .pet-container {
  width: 120px; height: 140px;
}

/* ‚îÄ‚îÄ Showerhead ‚îÄ‚îÄ */
.showerhead {
  position: absolute;
  top: 10%; right: 28%;
  z-index: 6;
}
.showerhead-neck {
  width: 8px; height: 60px;
  background: #bdbdbd;
  border: 2px solid var(--outline);
  border-radius: 4px;
  margin-left: 14px;
}
.showerhead-head {
  width: 40px; height: 14px;
  background: linear-gradient(180deg, #e0e0e0, #bdbdbd);
  border: 2px solid var(--outline);
  border-radius: 0 0 8px 8px;
  margin-top: -2px;
}
.showerhead-head::after {
  content: '';
  display: flex;
  justify-content: center;
  position: absolute;
  bottom: 2px; left: 6px;
  width: 4px; height: 4px;
  background: #78909c;
  border-radius: 50%;
  box-shadow: 8px 0 0 #78909c, 16px 0 0 #78909c, 24px 0 0 #78909c;
}

/* Water streams */
.water-streams {
  position: absolute;
  top: 72px; left: 2px;
  width: 36px; height: 0;
  overflow: hidden;
  transition: height .3s;
}
.water-streams.active {
  height: 200px;
}
.water-stream {
  position: absolute;
  width: 3px;
  background: linear-gradient(180deg, rgba(66,165,245,.7), rgba(66,165,245,.2));
  border-radius: 2px;
  animation: streamFall .6s linear infinite;
}
@keyframes streamFall {
  0% { transform: translateY(-10px); opacity: .8; }
  100% { transform: translateY(200px); opacity: .2; }
}

/* ‚îÄ‚îÄ Bath speech bubble ‚îÄ‚îÄ */
.bath-speech-bubble {
  position: absolute;
  top: 4%; left: 50%; transform: translateX(-50%);
  background: #fff;
  border: 3px solid var(--outline);
  border-radius: 20px;
  padding: 8px 18px;
  font-size: .9rem;
  font-weight: 600;
  max-width: 240px;
  text-align: center;
  z-index: 10;
  opacity: 1;
  transition: opacity .3s;
}
.bath-speech-bubble::after {
  content: '';
  position: absolute;
  bottom: -10px; left: 50%; transform: translateX(-50%);
  width: 0; height: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-top: 10px solid #fff;
  filter: drop-shadow(0 2px 0 var(--outline));
}
.bath-speech-bubble.hidden { opacity: 0; pointer-events: none; }

/* ‚îÄ‚îÄ Bottom bar ‚îÄ‚îÄ */
.bath-bottom-bar {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: linear-gradient(180deg, rgba(255,255,255,.95), #fff);
  border-top: 4px solid var(--outline);
  padding: 10px 16px 16px;
  text-align: center;
  z-index: 10;
}
.bath-title { font-size: 1.2rem; margin-bottom: 2px; }
.bath-hint { font-size: .78rem; color: #888; margin-bottom: 6px; }
.wash-meter-bg {
  width: 100%; max-width: 320px; height: 26px;
  background: #eee;
  border-radius: 13px;
  border: 3px solid var(--outline);
  overflow: hidden;
  margin: 6px auto;
}
.wash-meter-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #90caf9, #42a5f5, #1e88e5);
  border-radius: 13px;
  transition: width .3s ease;
}

/* Water button */
.btn-water {
  font-size: 1.1rem;
  padding: 12px 32px;
  background: linear-gradient(135deg, #42a5f5, #1e88e5);
  color: #fff;
  border: 3px solid var(--outline);
  border-radius: var(--radius);
  margin: 8px 0;
  cursor: pointer;
  font-family: var(--font);
  font-weight: 700;
  transition: transform .1s, box-shadow .1s;
  user-select: none;
  -webkit-user-select: none;
}
.btn-water:active, .btn-water.pressing {
  transform: scale(.95);
  background: linear-gradient(135deg, #1e88e5, #1565c0);
  box-shadow: inset 0 3px 8px rgba(0,0,0,.2);
}


/* ============================================================
   BLOWDRY SCENE
   ============================================================ */
#dry-scene {
  z-index: 2;
}

.dryroom {
  position: absolute;
  inset: 0;
  bottom: 140px;
  overflow: hidden;
}

/* ‚îÄ‚îÄ Wall (warmer/drier look) ‚îÄ‚îÄ */
.dry-wall {
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 55%;
  background: linear-gradient(180deg, #fce4ec, #f8bbd0 30%, #fce4ec 100%);
}

/* ‚îÄ‚îÄ Floor ‚îÄ‚îÄ */
.dry-floor {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 45%;
  background:
    repeating-conic-gradient(
      #ffecb3 0deg 90deg,
      #fff8e1 90deg 180deg
    ) 0 0 / 28px 28px;
}

/* ‚îÄ‚îÄ Bath mat ‚îÄ‚îÄ */
.bath-mat {
  position: absolute;
  bottom: 32%; left: 50%; transform: translateX(-50%);
  width: 180px; height: 24px;
  background: linear-gradient(90deg, #ce93d8, #ba68c8, #ce93d8);
  border: 3px solid var(--outline);
  border-radius: 12px;
  z-index: 2;
}

/* ‚îÄ‚îÄ Steam ‚îÄ‚îÄ */
.steam-area {
  position: absolute;
  bottom: 40%; left: 50%; transform: translateX(-50%);
  width: 200px; height: 120px;
  pointer-events: none;
  z-index: 8;
}
.steam-puff {
  position: absolute;
  font-size: 1rem;
  opacity: .5;
  animation: steamRise 2s ease forwards;
  pointer-events: none;
}
@keyframes steamRise {
  0% { opacity: .5; transform: translateY(0) scale(1); }
  100% { opacity: 0; transform: translateY(-60px) scale(1.5); }
}

/* ‚îÄ‚îÄ Pet on mat ‚îÄ‚îÄ */
.dry-pet-spot {
  position: absolute;
  bottom: 28%; left: 50%; transform: translateX(-50%);
  z-index: 5;
}
.dry-pet-spot .pet-container {
  width: 140px; height: 170px;
}

/* Water drops on wet pet */
.wet-drops {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 6;
}
.wet-drop {
  position: absolute;
  width: 5px; height: 8px;
  background: rgba(66,165,245,.7);
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  animation: dropFall 1.2s ease-in infinite;
}
@keyframes dropFall {
  0% { opacity: .8; transform: translateY(0); }
  100% { opacity: 0; transform: translateY(40px); }
}

/* ‚îÄ‚îÄ Dry speech bubble ‚îÄ‚îÄ */
.dry-speech-bubble {
  position: absolute;
  top: 4%; left: 50%; transform: translateX(-50%);
  background: #fff;
  border: 3px solid var(--outline);
  border-radius: 20px;
  padding: 8px 18px;
  font-size: .9rem;
  font-weight: 600;
  max-width: 240px;
  text-align: center;
  z-index: 10;
  opacity: 1;
  transition: opacity .3s;
}
.dry-speech-bubble::after {
  content: '';
  position: absolute;
  bottom: -10px; left: 50%; transform: translateX(-50%);
  width: 0; height: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-top: 10px solid #fff;
  filter: drop-shadow(0 2px 0 var(--outline));
}
.dry-speech-bubble.hidden { opacity: 0; pointer-events: none; }

/* ‚îÄ‚îÄ Bottom bar ‚îÄ‚îÄ */
.dry-bottom-bar {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: linear-gradient(180deg, rgba(255,255,255,.95), #fff);
  border-top: 4px solid var(--outline);
  padding: 10px 16px 14px;
  text-align: center;
  z-index: 10;
}
.dry-title { font-size: 1.2rem; margin-bottom: 2px; }
.dry-hint { font-size: .78rem; color: #888; margin-bottom: 6px; }
.dry-meter-bg {
  width: 100%; max-width: 320px; height: 26px;
  background: #eee;
  border-radius: 13px;
  border: 3px solid var(--outline);
  overflow: hidden;
  margin: 6px auto;
}
.dry-meter-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #ffcc80, #ffa726, #ff9800);
  border-radius: 13px;
  transition: width .3s ease;
}

/* ‚îÄ‚îÄ THE BLOWDRYER (draggable) ‚îÄ‚îÄ */
.blowdryer {
  position: fixed;
  font-size: 3rem;
  z-index: 100;
  cursor: grab;
  user-select: none;
  -webkit-user-select: none;
  filter: drop-shadow(0 3px 6px rgba(0,0,0,.25));
  right: 16px;
  top: 45%;
  transform: translateY(-50%) scaleX(-1);
  display: none;
}
.blowdryer.dragging {
  cursor: grabbing;
  filter: drop-shadow(0 6px 12px rgba(0,0,0,.3));
}
.blowdryer.blowing {
  animation: dryerShake .1s ease alternate infinite;
}
@keyframes dryerShake {
  0% { transform: scaleX(-1) rotate(-3deg); }
  100% { transform: scaleX(-1) rotate(3deg); }
}

/* Air blast particles from dryer */
.air-blast {
  position: absolute;
  font-size: .7rem;
  pointer-events: none;
  animation: airBlast .5s ease forwards;
  z-index: 99;
}
@keyframes airBlast {
  0% { opacity: .7; transform: translate(0,0) scale(1); }
  100% { opacity: 0; transform: translate(var(--ax), var(--ay)) scale(.3); }
}


/* ============================================================
   WALK SCENE
   ============================================================ */
#walk-scene {
  z-index: 2;
}

.walkpark {
  position: absolute;
  inset: 0;
  bottom: 150px;
  overflow: hidden;
}

/* ‚îÄ‚îÄ Sky ‚îÄ‚îÄ */
.walk-sky {
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 40%;
  background: linear-gradient(180deg, #64b5f6 0%, #90caf9 40%, #bbdefb 80%, #e3f2fd 100%);
}
.walk-sun {
  position: absolute;
  top: 6%; right: 10%;
  width: 52px; height: 52px;
  background: radial-gradient(circle, #fff176 30%, #ffee58 60%, transparent 72%);
  border-radius: 50%;
  box-shadow: 0 0 40px rgba(255,235,59,.6), 0 0 80px rgba(255,235,59,.3);
  animation: sunPulse 4s ease-in-out infinite alternate;
}
.cloud-w1 {
  width: 70px; height: 24px; top: 10%; left: 8%;
  animation: cloudDrift 32s linear infinite;
}
.cloud-w1::before { width: 30px; height: 30px; top: -16px; left: 12px; }
.cloud-w1::after  { width: 24px; height: 24px; top: -10px; right: 8px; }
.cloud-w2 {
  width: 90px; height: 28px; top: 18%; left: 50%;
  animation: cloudDrift 42s linear infinite; animation-delay: -10s;
}
.cloud-w2::before { width: 38px; height: 38px; top: -18px; left: 16px; }
.cloud-w2::after  { width: 28px; height: 28px; top: -12px; right: 12px; }
.cloud-w3 {
  width: 55px; height: 20px; top: 6%; left: 30%;
  animation: cloudDrift 36s linear infinite; animation-delay: -5s;
}
.cloud-w3::before { width: 24px; height: 24px; top: -12px; left: 8px; }
.cloud-w3::after  { width: 18px; height: 18px; top: -8px; right: 6px; }

/* ‚îÄ‚îÄ Distant hills ‚îÄ‚îÄ */
.walk-hills {
  position: absolute;
  top: 28%; left: 0; right: 0;
  height: 20%;
  z-index: 1;
}
.walk-hills::before {
  content: '';
  position: absolute;
  bottom: 0; left: -10%;
  width: 55%;  height: 100%;
  background: radial-gradient(ellipse at 50% 100%, #81c784 0%, transparent 70%);
  border-radius: 50%;
}
.walk-hills::after {
  content: '';
  position: absolute;
  bottom: 0; right: -10%;
  width: 60%; height: 90%;
  background: radial-gradient(ellipse at 50% 100%, #66bb6a 0%, transparent 70%);
  border-radius: 50%;
}

/* ‚îÄ‚îÄ Trees ‚îÄ‚îÄ */
.walk-trees {
  position: absolute;
  top: 26%; left: 0; right: 0;
  height: 30%;
  z-index: 2;
  pointer-events: none;
}
.walk-tree { position: absolute; bottom: 0; }
.wt-top {
  width: 48px; height: 48px;
  background: radial-gradient(circle, #66bb6a 40%, #388e3c 100%);
  border: 2px solid var(--outline);
  border-radius: 50%;
  position: relative;
  z-index: 2;
}
.wt-top::before {
  content: '';
  position: absolute;
  width: 32px; height: 32px;
  background: radial-gradient(circle, #81c784, #43a047);
  border: 2px solid var(--outline);
  border-radius: 50%;
  top: -14px; left: 50%; transform: translateX(-50%);
}
.wt-trunk {
  width: 10px; height: 24px;
  background: #795548;
  border: 2px solid var(--outline);
  border-radius: 3px;
  margin: -4px auto 0;
  position: relative;
  z-index: 1;
}
.wt-1 { left: 4%; }
.wt-2 { left: 22%; bottom: 10px; }
.wt-3 { left: 50%; }
.wt-4 { right: 18%; bottom: 8px; }
.wt-5 { right: 2%; }

/* ‚îÄ‚îÄ Grass ‚îÄ‚îÄ */
.walk-grass {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 50%;
  background: linear-gradient(180deg, #81c784, #66bb6a 30%, #4caf50 100%);
  z-index: 3;
}

/* ‚îÄ‚îÄ Scenery on grass ‚îÄ‚îÄ */
.walk-scenery {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 50%;
  z-index: 4;
  pointer-events: none;
}

/* Flowers */
.walk-flower {
  position: absolute;
  font-size: 1.1rem;
  animation: flowerBob 2.5s ease-in-out infinite alternate;
}
.wfl-1 { bottom: 70%; left: 5%; }
.wfl-2 { bottom: 55%; left: 20%; animation-delay: .3s; }
.wfl-3 { bottom: 78%; right: 8%; animation-delay: .7s; }
.wfl-4 { bottom: 42%; right: 25%; animation-delay: 1s; }
.wfl-5 { bottom: 65%; left: 45%; animation-delay: .5s; }
.wfl-6 { bottom: 48%; right: 40%; animation-delay: 1.2s; }
@keyframes flowerBob {
  0% { transform: translateY(0) rotate(-3deg); }
  100% { transform: translateY(-4px) rotate(3deg); }
}

/* Lampposts */
.walk-lamppost {
  position: absolute;
  bottom: 42%; width: 8px; height: 60px;
  background: #757575;
  border: 2px solid var(--outline);
  border-radius: 4px 4px 0 0;
}
.walk-lamppost::before {
  content: '';
  position: absolute;
  top: -10px; left: 50%; transform: translateX(-50%);
  width: 20px; height: 12px;
  background: #ffee58;
  border: 2px solid var(--outline);
  border-radius: 10px 10px 4px 4px;
  box-shadow: 0 0 8px rgba(255,235,59,.5);
}
.wlp-1 { left: 12%; }
.wlp-2 { right: 14%; }

/* Bushes */
.walk-bush {
  position: absolute;
  bottom: 44%;
  width: 36px; height: 24px;
  background: radial-gradient(ellipse, #4caf50 40%, #388e3c 100%);
  border: 2px solid var(--outline);
  border-radius: 50% 50% 40% 40%;
}
.wbush-1 { left: 30%; }
.wbush-2 { right: 5%; bottom: 52%; }
.wbush-3 { left: 65%; bottom: 62%; }

/* ‚îÄ‚îÄ Brown bumpy pathway ‚îÄ‚îÄ */
.walk-pathway-wrap {
  position: absolute;
  bottom: 8%; left: 0; right: 0;
  height: 22%;
  z-index: 5;
  overflow: hidden;
}
.walk-pathway {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  /* Sandy brown base with subtle texture */
  background:
    repeating-linear-gradient(
      90deg,
      rgba(141,110,99,.12) 0px,
      transparent 4px,
      transparent 14px,
      rgba(141,110,99,.12) 18px
    ),
    linear-gradient(
      180deg,
      #a1887f 0%,
      #8d6e63 20%,
      #795548 50%,
      #8d6e63 80%,
      #a1887f 100%
    );
  border-top: 4px solid #6d4c41;
  border-bottom: 4px solid #6d4c41;
}
/* Top bumpy edge */
.walk-pathway::before {
  content: '';
  position: absolute;
  top: -8px; left: 0; right: 0;
  height: 12px;
  background:
    radial-gradient(circle 8px at 10px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 30px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 50px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 70px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 90px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 110px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 130px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 150px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 170px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 190px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 210px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 230px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 250px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 270px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 290px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 310px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 330px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 350px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 370px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 390px 8px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 410px 8px, #8d6e63 70%, transparent 71%);
  background-repeat: repeat-x;
}
/* Bottom bumpy edge */
.walk-pathway::after {
  content: '';
  position: absolute;
  bottom: -8px; left: 0; right: 0;
  height: 12px;
  background:
    radial-gradient(circle 8px at 0px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 20px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 40px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 60px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 80px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 100px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 120px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 140px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 160px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 180px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 200px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 220px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 240px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 260px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 280px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 300px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 320px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 340px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 360px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 380px 4px, #8d6e63 70%, transparent 71%),
    radial-gradient(circle 8px at 400px 4px, #8d6e63 70%, transparent 71%);
  background-repeat: repeat-x;
}

/* Pebbles on path */
.path-bumps {
  position: absolute;
  inset: 0;
  overflow: hidden;
}
.path-pebble {
  position: absolute;
  border-radius: 50%;
  border: 1px solid rgba(0,0,0,.15);
  animation: pebbleScroll 3s linear infinite;
}
@keyframes pebbleScroll {
  0% { transform: translateX(0); }
  100% { transform: translateX(-120vw); }
}

/* ‚îÄ‚îÄ Pet on pathway ‚îÄ‚îÄ */
.walk-pet-spot {
  position: absolute;
  bottom: 14%;
  left: 25%;
  z-index: 8;
}
.walk-pet-spot .pet-container {
  width: 100px; height: 120px;
}
/* Walking bounce animation */
.walk-pet-spot.walking .pet-container {
  animation: walkBounce .35s ease infinite;
}
@keyframes walkBounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

/* Leash */
.walk-leash {
  position: absolute;
  top: 30%; right: -30px;
  width: 40px; height: 3px;
  background: linear-gradient(90deg, #e53935, #c62828);
  border-radius: 2px;
  transform-origin: left center;
  transform: rotate(15deg);
  display: none;
}

/* ‚îÄ‚îÄ Paw prints ‚îÄ‚îÄ */
.walk-paws {
  position: absolute;
  bottom: 10%;
  left: 0; right: 0;
  height: 25%;
  z-index: 6;
  pointer-events: none;
  overflow: hidden;
}
.paw-print {
  position: absolute;
  font-size: .7rem;
  opacity: .35;
  animation: pawFade 2s ease forwards;
}
@keyframes pawFade {
  0% { opacity: .5; }
  100% { opacity: 0; }
}

/* ‚îÄ‚îÄ Walk items (things you find on path) ‚îÄ‚îÄ */
.walk-items {
  position: absolute;
  bottom: 10%;
  left: 0; right: 0;
  height: 25%;
  z-index: 9;
  pointer-events: none;
}
.walk-item {
  position: absolute;
  font-size: 1.4rem;
  cursor: pointer;
  pointer-events: auto;
  animation: walkItemBob 1.5s ease-in-out infinite alternate, walkItemScroll 4s linear forwards;
  z-index: 9;
}
@keyframes walkItemBob {
  0% { transform: translateY(0); }
  100% { transform: translateY(-6px); }
}
@keyframes walkItemScroll {
  0% { left: 105%; }
  100% { left: -15%; }
}

/* ‚îÄ‚îÄ Walk speech bubble ‚îÄ‚îÄ */
.walk-speech-bubble {
  position: absolute;
  top: 3%; left: 50%; transform: translateX(-50%);
  background: #fff;
  border: 3px solid var(--outline);
  border-radius: 20px;
  padding: 8px 18px;
  font-size: .9rem;
  font-weight: 600;
  max-width: 240px;
  text-align: center;
  z-index: 12;
  opacity: 1;
  transition: opacity .3s;
}
.walk-speech-bubble::after {
  content: '';
  position: absolute;
  bottom: -10px; left: 50%; transform: translateX(-50%);
  width: 0; height: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-top: 10px solid #fff;
  filter: drop-shadow(0 2px 0 var(--outline));
}
.walk-speech-bubble.hidden { opacity: 0; pointer-events: none; }

/* ‚îÄ‚îÄ Walk bottom bar ‚îÄ‚îÄ */
.walk-bottom-bar {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: linear-gradient(180deg, rgba(255,255,255,.95), #fff);
  border-top: 4px solid var(--outline);
  padding: 10px 16px 14px;
  text-align: center;
  z-index: 10;
}
.walk-title { font-size: 1.2rem; margin-bottom: 2px; }
.walk-hint { font-size: .78rem; color: #888; margin-bottom: 4px; }
.walk-distance { font-size: .85rem; font-weight: 700; color: #6d4c41; margin: 4px 0; }
.walk-meter-bg {
  width: 100%; max-width: 320px; height: 26px;
  background: #eee;
  border-radius: 13px;
  border: 3px solid var(--outline);
  overflow: hidden;
  margin: 4px auto;
}
.walk-meter-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #a5d6a7, #66bb6a, #43a047);
  border-radius: 13px;
  transition: width .3s ease;
}

/* Walk/step button */
.btn-step {
  font-size: 1.2rem;
  padding: 12px 40px;
  background: linear-gradient(135deg, #81c784, #43a047);
  color: #fff;
  border: 3px solid var(--outline);
  border-radius: var(--radius);
  margin: 6px 0;
  cursor: pointer;
  font-family: var(--font);
  font-weight: 700;
  transition: transform .1s, box-shadow .1s;
  user-select: none;
  -webkit-user-select: none;
}
.btn-step:active {
  transform: scale(.93);
  background: linear-gradient(135deg, #66bb6a, #2e7d32);
  box-shadow: inset 0 3px 8px rgba(0,0,0,.2);
}

/* Walk action button color on main screen */
.btn-walk {
  background: linear-gradient(135deg, #a5d6a7, #66bb6a);
}

/* ============================================================
   NPC PARK PALS (other pets you meet on a walk)
   ============================================================ */

/* Area where NPC pets live */
.npc-pets-area {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 55%;
  z-index: 7;
  pointer-events: none;
}

/* An NPC pet wrapper ‚Äî slides in from the right */
.npc-pet-wrap {
  position: absolute;
  pointer-events: auto;
  cursor: pointer;
  transition: left 1.5s ease, right 1.5s ease;
}
.npc-pet-wrap .pet-container {
  width: 80px; height: 95px;
}
/* Gentle idle bounce */
.npc-pet-wrap .chibi-pet {
  animation: npcIdle 2s ease-in-out infinite alternate;
}
@keyframes npcIdle {
  0% { transform: translateY(0); }
  100% { transform: translateY(-4px); }
}

/* NPC colour tint overlays ‚Äî gives each NPC a unique look
   We use hue-rotate on the wrapper to recolour */
.npc-hue-1 .chibi-pet { filter: hue-rotate(25deg) saturate(1.1); }
.npc-hue-2 .chibi-pet { filter: hue-rotate(-15deg) saturate(1.15) brightness(1.05); }
.npc-hue-3 .chibi-pet { filter: hue-rotate(45deg) saturate(1.05); }
.npc-hue-4 .chibi-pet { filter: hue-rotate(-30deg) brightness(1.1); }

/* NPC mini name tag */
.npc-name-tag {
  position: absolute;
  top: -18px; left: 50%; transform: translateX(-50%);
  background: #fff;
  border: 2px solid var(--outline);
  border-radius: 10px;
  padding: 1px 8px;
  font-size: .55rem;
  font-weight: 700;
  white-space: nowrap;
  z-index: 2;
  pointer-events: none;
}

/* NPC tiny speech bubble */
.npc-tiny-speech {
  position: absolute;
  top: -38px; left: 50%; transform: translateX(-50%);
  background: #fffde7;
  border: 2px solid var(--outline);
  border-radius: 12px;
  padding: 2px 10px;
  font-size: .6rem;
  font-weight: 600;
  white-space: nowrap;
  z-index: 3;
  opacity: 0;
  transition: opacity .3s;
  pointer-events: none;
}
.npc-tiny-speech.show { opacity: 1; }
.npc-tiny-speech::after {
  content: '';
  position: absolute;
  bottom: -6px; left: 50%; transform: translateX(-50%);
  width: 0; height: 0;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-top: 6px solid #fffde7;
}

/* (Old interaction zone removed ‚Äî now using full playground scene) */

/* ‚îÄ‚îÄ Hearts / friendship particles ‚îÄ‚îÄ */
.npc-hearts-area {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 14;
  overflow: hidden;
}
.npc-heart-particle {
  position: absolute;
  font-size: 1rem;
  animation: heartFloat 1.5s ease forwards;
  pointer-events: none;
}
@keyframes heartFloat {
  0% { opacity: 1; transform: translateY(0) scale(1); }
  100% { opacity: 0; transform: translateY(-50px) scale(1.4); }
}

/* Pets playing together ‚Äî chase/bounce animation */
.npc-pet-wrap.playing .chibi-pet {
  animation: npcPlayBounce .3s ease infinite alternate;
}
@keyframes npcPlayBounce {
  0% { transform: translateY(0) rotate(-5deg); }
  100% { transform: translateY(-10px) rotate(5deg); }
}
.walk-pet-spot.playing .pet-container {
  animation: npcPlayBounce .3s ease infinite alternate;
}

/* NPC approaching animation */
.npc-pet-wrap.approaching {
  transition: left 1.8s ease-out, bottom 1.8s ease-out;
}
/* NPC leaving animation */
.npc-pet-wrap.leaving {
  transition: left 2s ease-in, opacity 2s ease-in;
  opacity: 0;
}


/* ============================================================
   PLAYGROUND SCENE (Pet Interaction)
   ============================================================ */
#playground-scene { z-index: 2; }

.playground {
  position: absolute;
  inset: 0;
  bottom: 120px;
  overflow: hidden;
}

/* ‚îÄ‚îÄ Sky ‚îÄ‚îÄ */
.pg-sky {
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 38%;
  background: linear-gradient(180deg, #64b5f6 0%, #90caf9 50%, #e3f2fd 100%);
}
.pg-sun {
  position: absolute;
  top: 6%; right: 12%;
  width: 46px; height: 46px;
  background: radial-gradient(circle, #fff176 30%, #ffee58 60%, transparent 72%);
  border-radius: 50%;
  box-shadow: 0 0 30px rgba(255,235,59,.5);
  animation: sunPulse 4s ease-in-out infinite alternate;
}
.cloud-pg1 {
  width: 75px; height: 24px; top: 10%; left: 12%;
  animation: cloudDrift 34s linear infinite;
}
.cloud-pg1::before { width: 30px; height: 30px; top: -14px; left: 12px; }
.cloud-pg1::after  { width: 22px; height: 22px; top: -8px; right: 8px; }
.cloud-pg2 {
  width: 60px; height: 20px; top: 18%; left: 55%;
  animation: cloudDrift 38s linear infinite; animation-delay: -12s;
}
.cloud-pg2::before { width: 26px; height: 26px; top: -12px; left: 10px; }
.cloud-pg2::after  { width: 18px; height: 18px; top: -8px; right: 6px; }

/* ‚îÄ‚îÄ Background trees ‚îÄ‚îÄ */
.pg-bg-trees {
  position: absolute;
  top: 24%; left: 0; right: 0;
  height: 28%;
  z-index: 1;
  pointer-events: none;
}
.pg-tree { position: absolute; bottom: 0; }
.pgt-top {
  width: 44px; height: 44px;
  background: radial-gradient(circle, #66bb6a 40%, #388e3c 100%);
  border: 2px solid var(--outline);
  border-radius: 50%;
}
.pgt-top::before {
  content: '';
  position: absolute;
  width: 30px; height: 30px;
  background: radial-gradient(circle, #81c784, #43a047);
  border: 2px solid var(--outline);
  border-radius: 50%;
  top: -12px; left: 50%; transform: translateX(-50%);
}
.pgt-trunk {
  width: 8px; height: 20px;
  background: #795548;
  border: 2px solid var(--outline);
  border-radius: 3px;
  margin: -3px auto 0;
}
.pgt-1 { left: 3%; }
.pgt-2 { left: 48%; bottom: 5px; }
.pgt-3 { right: 4%; }

/* ‚îÄ‚îÄ Grass ‚îÄ‚îÄ */
.pg-grass {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 55%;
  background: linear-gradient(180deg, #81c784 0%, #66bb6a 30%, #4caf50 100%);
  z-index: 2;
}
.pg-flowers {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 55%;
  z-index: 3;
  pointer-events: none;
}
.pg-flower {
  position: absolute;
  font-size: 1rem;
  animation: flowerBob 2.5s ease-in-out infinite alternate;
}
.pgf-1 { bottom: 80%; left: 5%; }
.pgf-2 { bottom: 65%; right: 6%; animation-delay: .4s; }
.pgf-3 { bottom: 50%; left: 40%; animation-delay: .8s; }
.pgf-4 { bottom: 72%; right: 30%; animation-delay: 1.1s; }

/* ‚îÄ‚îÄ THE SLIDE ‚îÄ‚îÄ */
.pg-slide {
  position: absolute;
  bottom: 26%; left: 8%;
  width: 100px; height: 130px;
  z-index: 6;
  cursor: pointer;
}
/* Ladder */
.slide-ladder {
  position: absolute;
  right: 0; bottom: 0;
  width: 16px; height: 100%;
  background: repeating-linear-gradient(
    0deg,
    #78909c 0px, #78909c 4px,
    #607d8b 4px, #607d8b 6px,
    transparent 6px, transparent 14px
  );
  border: 2px solid var(--outline);
  border-radius: 3px;
}
/* Platform at top */
.slide-platform {
  position: absolute;
  top: 0; left: 10px; right: 10px;
  height: 12px;
  background: #ff8a65;
  border: 2px solid var(--outline);
  border-radius: 4px;
}
/* Chute */
.slide-chute {
  position: absolute;
  top: 12px; left: 0;
  width: 50px; height: 120px;
  background: linear-gradient(135deg, #ffab91 0%, #ff8a65 50%, #ff7043 100%);
  border: 3px solid var(--outline);
  border-radius: 8px 4px 20px 4px;
  transform: skewX(-8deg);
}
.slide-chute::after {
  content: '';
  position: absolute;
  top: 4px; left: 4px; right: 4px;
  height: 60%;
  background: rgba(255,255,255,.2);
  border-radius: 6px 2px 12px 2px;
}
.slide-label {
  position: absolute;
  bottom: -20px; left: 50%; transform: translateX(-50%);
  font-size: .7rem;
  font-weight: 700;
  white-space: nowrap;
  background: #fff;
  border: 2px solid var(--outline);
  border-radius: 10px;
  padding: 2px 8px;
}

/* Active glow when tapped */
.pg-slide.active-zone {
  filter: drop-shadow(0 0 12px rgba(255,112,67,.6));
}

/* ‚îÄ‚îÄ TRICK ZONES ‚îÄ‚îÄ */
.pg-trick-zone {
  position: absolute;
  z-index: 6;
  cursor: pointer;
  text-align: center;
  transition: transform .15s;
}
.pg-trick-zone:active { transform: scale(.92); }
.pg-trick-zone.active-zone {
  filter: drop-shadow(0 0 10px rgba(255,235,59,.7));
}
.pg-trick-zone.done {
  opacity: .4;
  pointer-events: none;
}

.trick-label {
  font-size: .7rem;
  font-weight: 700;
  background: #fff;
  border: 2px solid var(--outline);
  border-radius: 10px;
  padding: 2px 8px;
  white-space: nowrap;
  margin-top: 4px;
  display: inline-block;
}

/* Jump zone */
.pg-trick-jump {
  bottom: 38%; right: 12%;
}
.trick-ring {
  width: 50px; height: 50px;
  border: 5px solid #ff9800;
  border-radius: 50%;
  margin: 0 auto;
  position: relative;
}
.trick-ring::before {
  content: '';
  position: absolute;
  inset: 4px;
  border: 2px dashed rgba(255,152,0,.4);
  border-radius: 50%;
}

/* Spin zone */
.pg-trick-spin {
  bottom: 20%; left: 38%;
}
.trick-star {
  font-size: 2rem;
  animation: starSpin 3s linear infinite;
}
@keyframes starSpin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Roll zone */
.pg-trick-roll {
  bottom: 22%; right: 28%;
}
.trick-mat {
  width: 52px; height: 20px;
  background: repeating-linear-gradient(
    90deg,
    #ce93d8 0px, #ce93d8 8px,
    #ba68c8 8px, #ba68c8 16px
  );
  border: 2px solid var(--outline);
  border-radius: 6px;
  margin: 0 auto;
}

/* ‚îÄ‚îÄ Pets in playground ‚îÄ‚îÄ */
.pg-my-pet, .pg-npc-pet {
  position: absolute;
  z-index: 8;
  transition: left .8s ease, bottom .8s ease, transform .3s ease;
}
.pg-my-pet {
  bottom: 24%; left: 20%;
}
.pg-npc-pet {
  bottom: 24%; left: 60%;
}
.pg-my-pet .pet-container,
.pg-npc-pet .pet-container {
  width: 80px; height: 95px;
}
.pg-npc-tag {
  position: absolute;
  top: -16px; left: 50%; transform: translateX(-50%);
  background: #fff;
  border: 2px solid var(--outline);
  border-radius: 10px;
  padding: 1px 7px;
  font-size: .5rem;
  font-weight: 700;
  white-space: nowrap;
}

/* ‚îÄ‚îÄ Activity animations ‚îÄ‚îÄ */
/* Sliding down */
.pg-my-pet.sliding, .pg-npc-pet.sliding {
  transition: left 1.2s ease-in, bottom 1.2s ease-in;
}
/* Jump trick */
@keyframes petJump {
  0% { transform: translateY(0); }
  30% { transform: translateY(-50px) scale(1.05); }
  50% { transform: translateY(-55px) scale(1.08); }
  70% { transform: translateY(-30px); }
  100% { transform: translateY(0) scale(1); }
}
.pg-my-pet.jumping .pet-container,
.pg-npc-pet.jumping .pet-container {
  animation: petJump .7s ease;
}
/* Spin trick */
@keyframes petSpin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(720deg); }
}
.pg-my-pet.spinning .pet-container,
.pg-npc-pet.spinning .pet-container {
  animation: petSpin .8s ease;
}
/* Roll trick */
@keyframes petRoll {
  0% { transform: rotate(0deg) translateX(0); }
  25% { transform: rotate(90deg) translateX(10px); }
  50% { transform: rotate(180deg) translateX(20px); }
  75% { transform: rotate(270deg) translateX(10px); }
  100% { transform: rotate(360deg) translateX(0); }
}
.pg-my-pet.rolling .pet-container,
.pg-npc-pet.rolling .pet-container {
  animation: petRoll .8s ease;
}
/* Happy bounce after trick */
@keyframes trickCelebrate {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-12px) scale(1.1); }
}
.pg-my-pet.celebrate .pet-container,
.pg-npc-pet.celebrate .pet-container {
  animation: trickCelebrate .4s ease 2;
}

/* ‚îÄ‚îÄ Speech bubbles ‚îÄ‚îÄ */
.pg-speech-bubble {
  position: absolute;
  background: #fff;
  border: 2px solid var(--outline);
  border-radius: 14px;
  padding: 4px 12px;
  font-size: .72rem;
  font-weight: 600;
  max-width: 140px;
  text-align: center;
  z-index: 12;
  opacity: 1;
  transition: opacity .3s;
  pointer-events: none;
}
.pg-speech-bubble::after {
  content: '';
  position: absolute;
  bottom: -7px; left: 50%; transform: translateX(-50%);
  border-left: 7px solid transparent;
  border-right: 7px solid transparent;
  border-top: 7px solid #fff;
}
.pg-speech-bubble.hidden { opacity: 0; }
.pg-my-speech { top: 3%; left: 10%; }
.pg-npc-speech { top: 3%; right: 10%; background: #fffde7; }
.pg-npc-speech::after { border-top-color: #fffde7; }

/* ‚îÄ‚îÄ Particles ‚îÄ‚îÄ */
.pg-particles {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 14;
  overflow: hidden;
}

/* ‚îÄ‚îÄ Bottom bar ‚îÄ‚îÄ */
.pg-bottom-bar {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: linear-gradient(180deg, rgba(255,255,255,.95), #fff);
  border-top: 4px solid var(--outline);
  padding: 8px 16px 12px;
  text-align: center;
  z-index: 10;
}
.pg-title { font-size: 1.1rem; margin-bottom: 2px; }
.pg-hint { font-size: .72rem; color: #888; margin-bottom: 4px; }
.pg-score-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  font-size: .8rem;
  font-weight: 700;
}
.pg-fun-meter-bg {
  width: 120px; height: 18px;
  background: #eee;
  border-radius: 9px;
  border: 2px solid var(--outline);
  overflow: hidden;
}
.pg-fun-meter-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #ffcc80, #ff9800, #f57c00);
  border-radius: 9px;
  transition: width .3s ease;
}


/* ============================================================
   BARBER SHOP SCENE (Groom)
   ============================================================ */
#groom-scene {
  z-index: 2;
}

.barbershop {
  position: absolute;
  inset: 0;
  bottom: 150px;
  overflow: hidden;
}

/* ‚îÄ‚îÄ Wall ‚îÄ‚îÄ */
.barber-wall {
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 50%;
  background:
    repeating-linear-gradient(
      0deg,
      #e8d5f0 0px, #e8d5f0 20px,
      #f0e4f6 20px, #f0e4f6 40px
    );
  /* soft lavender stripes */
}

/* Barber sign */
.barber-sign {
  position: absolute;
  top: 6%; left: 50%; transform: translateX(-50%);
  background: linear-gradient(135deg, var(--pink), var(--peach));
  border: 3px solid var(--outline);
  border-radius: var(--radius);
  padding: 6px 20px;
  font-size: 1.1rem;
  font-weight: 800;
  box-shadow: 0 4px 12px rgba(0,0,0,.12);
  z-index: 3;
}

/* Mirror */
.barber-mirror {
  position: absolute;
  top: 20%; left: 50%; transform: translateX(-50%);
  width: 90px; height: 70px;
  background: linear-gradient(160deg, #e3f2fd, #bbdefb, #e3f2fd);
  border: 5px solid #8d6e63;
  border-radius: 12px 12px 50% 50%;
  box-shadow: 0 4px 16px rgba(0,0,0,.12);
  z-index: 2;
  overflow: hidden;
}
.mirror-shine {
  position: absolute;
  top: 8px; left: 8px;
  width: 20px; height: 30px;
  background: rgba(255,255,255,.5);
  border-radius: 50%;
  transform: rotate(-20deg);
}

/* Shelf */
.barber-shelf {
  position: absolute;
  top: 26%; right: 8%;
  width: 70px; height: 10px;
  background: #8d6e63;
  border: 2px solid var(--outline);
  border-radius: 3px;
  z-index: 2;
}
.shelf-bottle {
  position: absolute;
  bottom: 6px;
  border: 2px solid var(--outline);
  border-radius: 3px 3px 6px 6px;
}
.sb-1 { left: 5px; width: 12px; height: 22px; background: #ef9a9a; }
.sb-2 { left: 24px; width: 10px; height: 18px; background: #a5d6a7; }
.sb-3 { left: 42px; width: 14px; height: 24px; background: #90caf9; }
.shelf-bottle::before {
  content: '';
  position: absolute;
  top: -5px; left: 50%; transform: translateX(-50%);
  width: 6px; height: 5px;
  background: inherit;
  border: 1px solid var(--outline);
  border-radius: 2px;
}

/* Barber pole */
.barber-pole-wrap {
  position: absolute;
  top: 18%; left: 8%;
  z-index: 2;
}
.barber-pole {
  width: 16px; height: 80px;
  background:
    repeating-linear-gradient(
      -45deg,
      #e53935 0px, #e53935 6px,
      #fff 6px, #fff 12px,
      #1e88e5 12px, #1e88e5 18px,
      #fff 18px, #fff 24px
    );
  border: 2px solid var(--outline);
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,.15);
  animation: poleScroll 2s linear infinite;
}
@keyframes poleScroll {
  0% { background-position: 0 0; }
  100% { background-position: 0 24px; }
}

/* ‚îÄ‚îÄ Floor ‚îÄ‚îÄ */
.barber-floor {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 50%;
  background:
    repeating-conic-gradient(
      #e0e0e0 0deg 90deg,
      #f5f5f5 90deg 180deg
    ) 0 0 / 30px 30px;
  /* checkerboard tile */
}

/* ‚îÄ‚îÄ Chair ‚îÄ‚îÄ */
.barber-chair {
  position: absolute;
  bottom: 0; left: 50%; transform: translateX(-50%);
  z-index: 2;
}
.chair-seat {
  width: 120px; height: 20px;
  background: linear-gradient(180deg, #7e57c2, #5e35b1);
  border: 3px solid var(--outline);
  border-radius: 10px 10px 4px 4px;
}
.chair-base {
  width: 40px; height: 30px;
  background: #9e9e9e;
  border: 2px solid var(--outline);
  border-radius: 0 0 6px 6px;
  margin: 0 auto;
}
.chair-base::after {
  content: '';
  display: block;
  width: 60px; height: 8px;
  background: #757575;
  border: 2px solid var(--outline);
  border-radius: 4px;
  margin: 0 auto;
  position: relative;
  left: -10px;
}

/* ‚îÄ‚îÄ Pet on chair ‚îÄ‚îÄ */
.barber-pet-spot {
  position: absolute;
  bottom: 40px; left: 50%; transform: translateX(-50%);
  z-index: 3;
}
.barber-pet-spot .pet-container {
  width: 140px; height: 170px;
}

/* ‚îÄ‚îÄ Groom zone (collision area for brush) ‚îÄ‚îÄ */
.barber-groom-zone {
  position: absolute;
  bottom: 18%; left: 50%; transform: translateX(-50%);
  width: 220px; height: 240px;
  z-index: 4;
}

/* ‚îÄ‚îÄ Speech bubble ‚îÄ‚îÄ */
.barber-speech-bubble {
  position: absolute;
  top: 4%; left: 50%; transform: translateX(-50%);
  background: #fff;
  border: 3px solid var(--outline);
  border-radius: 20px;
  padding: 8px 18px;
  font-size: .9rem;
  font-weight: 600;
  max-width: 240px;
  text-align: center;
  z-index: 10;
  opacity: 1;
  transition: opacity .3s;
}
.barber-speech-bubble::after {
  content: '';
  position: absolute;
  bottom: -10px; left: 50%; transform: translateX(-50%);
  width: 0; height: 0;
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-top: 10px solid #fff;
  filter: drop-shadow(0 2px 0 var(--outline));
}
.barber-speech-bubble.hidden { opacity: 0; pointer-events: none; }

/* ‚îÄ‚îÄ THE BRUSH (draggable, floats over everything) ‚îÄ‚îÄ */
.barber-brush {
  position: fixed;
  font-size: 3rem;
  z-index: 100;
  cursor: grab;
  user-select: none;
  -webkit-user-select: none;
  filter: drop-shadow(0 3px 6px rgba(0,0,0,.25));
  transition: transform .08s;
  /* Start on the right side */
  right: 20px;
  top: 50%;
  transform: translateY(-50%) rotate(-30deg);
  display: none; /* shown via JS */
}
.barber-brush.dragging {
  cursor: grabbing;
  transform: rotate(-15deg) scale(1.1);
  filter: drop-shadow(0 6px 12px rgba(0,0,0,.3));
}
.barber-brush.brushing {
  animation: brushStroke .15s ease alternate infinite;
}
@keyframes brushStroke {
  0% { transform: rotate(-20deg) scale(1.05); }
  100% { transform: rotate(-10deg) scale(1.05); }
}

/* Fluff particles (bits of fur/feather that fly off) */
.fluff-particle {
  position: absolute;
  font-size: .9rem;
  pointer-events: none;
  animation: fluffFly .8s ease forwards;
  z-index: 20;
}
@keyframes fluffFly {
  0% { opacity: 1; transform: translate(0,0) scale(1) rotate(0deg); }
  100% { opacity: 0; transform: translate(var(--fx), var(--fy)) scale(.3) rotate(180deg); }
}

/* ‚îÄ‚îÄ Bottom bar ‚îÄ‚îÄ */
.barber-bottom-bar {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: linear-gradient(180deg, rgba(255,255,255,.95), #fff);
  border-top: 4px solid var(--outline);
  padding: 10px 16px 16px;
  text-align: center;
  z-index: 10;
}
.barber-title {
  font-size: 1.2rem;
  margin-bottom: 2px;
  color: var(--text);
}
.barber-hint {
  font-size: .78rem;
  color: #888;
  margin-bottom: 6px;
}
.barber-bottom-bar .brush-meter-bg {
  margin: 6px auto;
  max-width: 320px;
}
.barber-bottom-bar .groom-result {
  margin-top: 4px;
}


/* ===================== SLEEP / BEDROOM SCENE ===================== */
#sleep-scene { position: fixed; inset: 0; z-index: 5; }
.bedroom { position: absolute; inset: 0; overflow: hidden; }

/* Dark wall */
.bed-wall {
  position: absolute; top: 0; left: 0; right: 0; height: 55%;
  background: linear-gradient(180deg, #1a1a3e 0%, #2a2a5e 60%, #3a3a6e 100%);
}
/* Floor */
.bed-floor {
  position: absolute; bottom: 0; left: 0; right: 0; height: 45%;
  background: linear-gradient(180deg, #6b5b4f 0%, #8b7b6f 100%);
}
.bed-floor::before {
  content: ''; position: absolute; inset: 0;
  background: repeating-linear-gradient(90deg, transparent, transparent 60px, rgba(0,0,0,.06) 60px, rgba(0,0,0,.06) 62px);
}

/* Night window */
.bed-window {
  position: absolute; top: 6%; left: 50%; transform: translateX(-50%);
  width: 140px; height: 120px; z-index: 2;
}
.window-frame {
  position: absolute; inset: 0;
  border: 8px solid #5a4a3a; border-radius: 12px 12px 4px 4px;
  z-index: 2;
}
.window-frame::after {
  content: ''; position: absolute; top: 0; bottom: 0;
  left: 50%; width: 6px; transform: translateX(-50%);
  background: #5a4a3a;
}
.window-frame::before {
  content: ''; position: absolute; left: 0; right: 0;
  top: 50%; height: 6px; transform: translateY(-50%);
  background: #5a4a3a;
}
.window-sky {
  position: absolute; inset: 8px; border-radius: 6px 6px 0 0;
  background: linear-gradient(180deg, #0a0a2e 0%, #1a1a4e 100%);
  overflow: hidden;
}
.window-moon {
  position: absolute; top: 12px; right: 14px;
  font-size: 2rem;
  animation: moonGlow 3s ease-in-out infinite alternate;
}
@keyframes moonGlow {
  0% { filter: brightness(1); transform: scale(1); }
  100% { filter: brightness(1.3); transform: scale(1.08); }
}
.window-star {
  position: absolute; font-size: .7rem;
  animation: twinkle 2s ease-in-out infinite alternate;
}
.ws-1 { top: 10px; left: 12px; animation-delay: 0s; }
.ws-2 { top: 28px; left: 30px; animation-delay: .5s; }
.ws-3 { top: 14px; left: 55px; animation-delay: 1s; }
.ws-4 { top: 40px; left: 18px; animation-delay: .3s; }
.ws-5 { top: 50px; left: 48px; animation-delay: .8s; }
@keyframes twinkle {
  0% { opacity: .4; transform: scale(.8); }
  100% { opacity: 1; transform: scale(1.2); }
}
/* Curtains */
.window-curtain {
  position: absolute; top: 2px; width: 22px; height: 120px;
  z-index: 3;
}
.curtain-l {
  left: 0;
  background: linear-gradient(90deg, #4a3a6a, #5a4a7a);
  border-radius: 0 0 40% 0;
}
.curtain-r {
  right: 0;
  background: linear-gradient(-90deg, #4a3a6a, #5a4a7a);
  border-radius: 0 0 0 40%;
}

/* Nightstand */
.nightstand {
  position: absolute; bottom: 44%; right: 12%;
  width: 60px; height: 50px;
  background: #6b5b4f; border: 3px solid #4a3a2a;
  border-radius: 4px 4px 6px 6px;
  z-index: 2;
}
.nightstand::before {
  content: ''; position: absolute; top: -3px; left: -4px; right: -4px; height: 6px;
  background: #5a4a3a; border-radius: 4px;
}
.night-lamp {
  position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%);
}
.lamp-shade {
  width: 36px; height: 22px;
  background: linear-gradient(180deg, #ffe08a, #ffcc44);
  border-radius: 50% 50% 6px 6px;
  border: 2px solid var(--outline);
}
.lamp-base {
  width: 8px; height: 14px; margin: 0 auto;
  background: #8b7b6f; border-radius: 0 0 3px 3px;
}
.lamp-glow {
  position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
  width: 80px; height: 80px;
  background: radial-gradient(circle, rgba(255,224,138,.35) 0%, transparent 70%);
  pointer-events: none;
}

/* Rug */
.bed-rug {
  position: absolute; bottom: 38%; left: 50%; transform: translateX(-50%);
  width: 200px; height: 30px;
  background: linear-gradient(90deg, #e8a0b0, #d08090, #e8a0b0);
  border-radius: 50%;
  border: 3px solid #b06070;
  opacity: .7;
  z-index: 1;
}

/* THE BED ‚Äî blue with bright yellow stars */
.pet-bed {
  position: absolute; bottom: 30%; left: 50%; transform: translateX(-50%);
  width: 220px; height: 130px;
  z-index: 3;
}
.bed-frame {
  position: relative; width: 100%; height: 100%;
}
.bed-headboard {
  position: absolute; top: 0; left: 0; right: 0; height: 50px;
  background: linear-gradient(180deg, #2a5cb0, #3a6cc0);
  border: 4px solid var(--outline);
  border-radius: 18px 18px 0 0;
  z-index: 1;
}
.bed-headboard::before {
  content: '‚≠ê'; position: absolute; top: 10px; left: 50%; transform: translateX(-50%);
  font-size: 1.4rem;
}
.bed-mattress {
  position: absolute; top: 35px; left: -4px; right: -4px; bottom: 0;
  background: #e8e0d8;
  border: 4px solid var(--outline);
  border-radius: 0 0 10px 10px;
}
.bed-blanket {
  position: absolute; top: 45px; left: 0; right: 0; bottom: 0;
  background: linear-gradient(135deg, #2a6ad4, #3a7ae4, #2a6ad4);
  border: 3px solid var(--outline);
  border-radius: 0 0 8px 8px;
  overflow: hidden;
  z-index: 2;
  transition: top .8s ease;
}
/* Bright yellow stars on blanket */
.blanket-star {
  position: absolute; font-size: 1rem; color: #ffd700;
  filter: drop-shadow(0 0 4px rgba(255,215,0,.6));
  animation: twinkle 2s ease-in-out infinite alternate;
}
.bs-1 { top: 8px; left: 12%; animation-delay: 0s; }
.bs-2 { top: 18px; left: 42%; animation-delay: .4s; }
.bs-3 { top: 6px; left: 72%; animation-delay: .8s; }
.bs-4 { top: 30px; left: 25%; animation-delay: .2s; }
.bs-5 { top: 28px; left: 58%; animation-delay: .6s; }
.bs-6 { top: 40px; left: 85%; animation-delay: 1s; }

.bed-pillow {
  position: absolute; top: 32px; left: 50%; transform: translateX(-50%);
  width: 70px; height: 28px;
  background: #fff5ee;
  border: 3px solid var(--outline);
  border-radius: 50%;
  z-index: 3;
}

/* Pet in bed */
.bed-pet-spot {
  position: absolute; top: 10px; left: 50%; transform: translateX(-50%) scale(.65);
  z-index: 4;
}
.bed-pet-spot .pet-container {
  filter: none;
  transition: filter .5s ease, opacity .5s ease;
}
/* Sleeping eyes (replace normal eyes with closed lines) */
.bed-pet-spot .chibi-eye {
  height: 3px !important;
  border-radius: 0 !important;
  background: var(--outline) !important;
  margin-top: 6px;
}
.bed-pet-spot .chibi-eye::before,
.bed-pet-spot .chibi-eye::after {
  display: none !important;
}
/* Waking transition: normal eyes return */
.bed-pet-spot.waking .chibi-eye {
  height: 16px !important;
  border-radius: 50% !important;
  background: #2d2030 !important;
  margin-top: 0;
  transition: all .3s ease;
}
.bed-pet-spot.waking .chibi-eye::before,
.bed-pet-spot.waking .chibi-eye::after {
  display: block !important;
}

/* Zzz floating */
.zzz-area {
  position: absolute; top: 20%; right: 15%;
  width: 80px; height: 120px;
  z-index: 5;
  pointer-events: none;
}
.zzz-float {
  position: absolute;
  font-size: 1.5rem; font-weight: 900;
  color: #c0c8ff;
  text-shadow: 0 0 8px rgba(180,190,255,.5);
  animation: zzzFloat 2s ease-in-out infinite;
  opacity: 0;
}
.zzz-float:nth-child(1) { bottom: 0; left: 0; animation-delay: 0s; font-size: 1rem; }
.zzz-float:nth-child(2) { bottom: 20px; left: 20px; animation-delay: .6s; font-size: 1.3rem; }
.zzz-float:nth-child(3) { bottom: 40px; left: 40px; animation-delay: 1.2s; font-size: 1.6rem; }
@keyframes zzzFloat {
  0% { opacity: 0; transform: translateY(0) scale(.7); }
  20% { opacity: 1; }
  80% { opacity: .6; }
  100% { opacity: 0; transform: translateY(-50px) scale(1.2); }
}

/* Speech bubble in bedroom */
.bed-speech-bubble {
  position: absolute; top: 10%; left: 50%; transform: translateX(-50%);
  background: rgba(255,255,255,.9); border: 3px solid var(--outline);
  border-radius: var(--radius-lg);
  padding: 8px 16px; font-size: .85rem; font-weight: 600;
  z-index: 6; white-space: nowrap;
  animation: popIn .4s ease;
}

/* Bottom bar */
.bed-bottom-bar {
  position: fixed; bottom: 0; left: 0; right: 0;
  background: linear-gradient(180deg, rgba(30,30,60,.9), rgba(20,20,50,.95));
  border-top: 4px solid #4a4a8a;
  padding: 12px 16px 18px; text-align: center;
  z-index: 10; color: #e0e0ff;
}
.bed-title { font-size: 1.3rem; margin-bottom: 4px; }
.bed-hint { font-size: .8rem; color: #a0a0d0; }

/* ===================== EVENT VISUAL OVERLAY ===================== */
/* Shows floating visual items on the pet when random events happen */
.event-visual {
  position: fixed; inset: 0; pointer-events: none; z-index: 25;
}
.event-visual.hidden { display: none; }

.event-item {
  position: absolute; font-size: 2.2rem;
  animation: eventItemFloat 2.5s ease-out forwards;
  pointer-events: none;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.2));
}
@keyframes eventItemFloat {
  0% { opacity: 0; transform: scale(0) rotate(-20deg); }
  15% { opacity: 1; transform: scale(1.2) rotate(5deg); }
  30% { transform: scale(1) rotate(0deg); }
  70% { opacity: 1; transform: scale(1) translateY(-10px); }
  100% { opacity: 0; transform: scale(.6) translateY(-60px) rotate(20deg); }
}

/* Special: sock on head */
.event-sock {
  animation: eventSockBob 2.5s ease-out forwards;
}
@keyframes eventSockBob {
  0% { opacity: 0; transform: translateY(-60px) rotate(-30deg); }
  20% { opacity: 1; transform: translateY(0) rotate(10deg); }
  40% { transform: translateY(-5px) rotate(-5deg); }
  60% { transform: translateY(0) rotate(5deg); }
  80% { opacity: 1; transform: translateY(-5px) rotate(0deg); }
  100% { opacity: 0; transform: translateY(-30px) rotate(15deg); }
}

/* Butterfly landing */
.event-butterfly {
  animation: eventButterflyLand 3s ease-in-out forwards;
}
@keyframes eventButterflyLand {
  0% { opacity: 0; transform: translate(60px, -60px) scale(.5) rotate(-10deg); }
  30% { opacity: 1; transform: translate(20px, -20px) scale(.9) rotate(5deg); }
  50% { transform: translate(0, 0) scale(1) rotate(-3deg); }
  70% { transform: translate(-5px, 2px) scale(1) rotate(3deg); }
  85% { opacity: 1; transform: translate(0, 0) scale(1) rotate(0deg); }
  100% { opacity: 0; transform: translate(-40px, -50px) scale(.7) rotate(-10deg); }
}

/* Leaf falling */
.event-leaf {
  animation: eventLeafFall 2.8s ease-in-out forwards;
}
@keyframes eventLeafFall {
  0% { opacity: 0; transform: translate(20px, -80px) rotate(-45deg); }
  25% { opacity: 1; transform: translate(-10px, -30px) rotate(15deg); }
  50% { transform: translate(10px, 0) rotate(-10deg); }
  75% { opacity: 1; transform: translate(-5px, 5px) rotate(20deg); }
  100% { opacity: 0; transform: translate(15px, -20px) rotate(-30deg); }
}

/* Star wink */
.event-star-wink {
  animation: eventStarWink 2.5s ease-in-out forwards;
}
@keyframes eventStarWink {
  0% { opacity: 0; transform: scale(0) rotate(0deg); }
  20% { opacity: 1; transform: scale(1.3) rotate(20deg); }
  40% { transform: scale(1) rotate(0deg); }
  60% { transform: scale(1.2) rotate(-10deg); }
  80% { opacity: 1; transform: scale(1) rotate(5deg); }
  100% { opacity: 0; transform: scale(2) rotate(0deg); }
}

/* Glitter burst */
.event-glitter {
  font-size: 1.5rem;
  animation: eventGlitter 2s ease-out forwards;
}
@keyframes eventGlitter {
  0% { opacity: 0; transform: scale(0) rotate(0deg); }
  20% { opacity: 1; transform: scale(1.4) rotate(30deg); }
  50% { transform: scale(1) rotate(-20deg); }
  100% { opacity: 0; transform: scale(.3) rotate(60deg) translateY(-40px); }
}

/* ===================== UTILITY ===================== */
.hidden { display: none !important; }

/* Responsive tweaks */
@media (max-width: 480px) {
  .btn-action { width: 50px; height: 56px; }
  .btn-action .btn-icon { font-size: 1rem; }
  .btn-action .btn-label { font-size: .5rem; }
  .pet-container { width: 160px; height: 200px; }
  .chibi-body { width: 100px; height: 92px; }
  .overlay-panel { padding: 16px 14px; }
  .dining-table { width: 240px; }
  .park-bottom-bar .play-area { height: 130px; }
}
